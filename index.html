<!-- Defiads Webapp build. Feel free to modify config at line 7 -->
<script>
(function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c="function"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error("Cannot find module '"+i+"'");throw a.code="MODULE_NOT_FOUND",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u="function"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()({1:[function(require,module,exports){
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const core_1 = require("./core");
exports.CONFIG = {
    endpoint: "https://defiads.anondns.net/api",
    apiKey: "kKWQRIPnH1RcTkqo",
    privateKey: undefined,
};
const READ_ONLY_MODE = true;
const CURRENT_VERSION = 0;
const AUTHORIZED_RELEASE_ISSUER = "e237cb4bf87442aff8b40a305332b02e3973d6cc01dd4abbf3f7f1057c806f5f";
const getTransport = core_1.flat(core_1.strictOrTo)((context) => context.transport, (context) => context.transport = core_1.xhrTransport);
const getErrHandlerMap = core_1.flat(core_1.strictOrTo)((context) => context.errHandlerMap, (context) => context.errHandlerMap = {
    default: core_1.toChain(core_1.op(console.log), core_1.toNone),
});
const getErrHandler = (context) => (err) => {
    const errHandlerMap = getErrHandlerMap(context);
    if (core_1.isNone(errHandlerMap)) {
        return core_1.none;
    }
    if (err.code in errHandlerMap) {
        return errHandlerMap[err.code](err);
    }
    return errHandlerMap.default(err);
};
const getDefiadsClientContext = core_1.asyncToFirstOf((context) => context.defiadsClientContext, (context) => core_1.asyncToChain(async (context) => {
    const get = getVarGetter(getMultiStorage(context));
    const endpoint = await get("endpoint");
    const apiKey = await get("apiKey");
    return {
        endpoint,
        apiKey,
        errHandler: getErrHandler(context),
        transport: getTransport(context),
    };
}, core_1.toFirstOf(core_1.as(core_1.objectIsOfSome), core_1.op(console.log)), (clientConfig) => context.defiadsClientContext = clientConfig)(context));
const getDefiadsClient = core_1.asyncToFirstOf((context) => context.defiadsClient, async (context) => context.defiadsClient = core_1.optionTo(core_1.defiadsClientFactory)(await getDefiadsClientContext(context)));
const getDefiadsApi = core_1.asyncToFirstOf((context) => context.defiadsApi, async (context) => context.defiadsApi = core_1.optionTo(core_1.defiadsFactory)(await getDefiadsClient(context)));
const getDefiadsApiWallet = core_1.asyncToFirstOf((context) => context.defiadsApiWallet, (context) => core_1.asyncToChain(getDefiadsApi, async (defiads) => {
    const get = getVarGetter(getMultiStorage(context));
    const passphrase = await get("passphrase");
    return core_1.isSome(passphrase) ? defiads.wallet(passphrase) : core_1.none;
}, (wallet) => context.defiadsApiWallet = wallet)(context));
const getPrivateKey = core_1.asyncToFirstOf((context) => context.privateKey, (context) => core_1.asyncToChain(core_1.asyncToFirstOf(core_1.asyncToChain(getMultiStorage, core_1.swap(getVarGetter)("privateKey"), core_1.stringToJwk, core_1.as(core_1.jwkIsPrivate), core_1.jwkToKey), core_1.asyncToChain(core_1.generateKey, (keyPair) => keyPair.privateKey, core_1.op(core_1.asyncToChain(core_1.keyToString, (keyString) => ({ default: keyString }), core_1.swap(core_1.unflat(getVarGetter)(getMultiStorage(context)))("showPrivateKey"))))), core_1.op((privateKey) => context.privateKey = privateKey))(context));
const getComposerContext = core_1.flat(core_1.strictOrTo)((context) => context.composerContext, (context) => context.composerContext = {
    display: true,
    defiadId: core_1.none,
    prepared: core_1.none,
});
const getCache = core_1.flat(core_1.strictOrTo)((context) => context.cache, (context) => context.cache = {});
const getMultiStorage = core_1.flat(core_1.strictOrTo)((context) => context.multiStorage, (context) => context.multiStorage = core_1.flat(core_1.strictAndTo)(getCache, core_1.flat(core_1.strictAndTo)(getStorage, createMultiStorage)("local"))(context));
const getStorage = core_1.tryCatch((type) => type === "session" ? sessionStorage : localStorage);
const createMultiStorage = (storage) => (cache) => ({
    get: (key) => { var _a; return (_a = cache[key]) !== null && _a !== void 0 ? _a : (core_1.isSome(storage) ? core_1.fromNullable(core_1.tryCatch(storage.getItem.bind(storage)))(key) : core_1.none); },
    set: (key) => (value) => {
        cache[key] = value;
        return true;
    },
    persist: (key) => (value) => {
        if (core_1.isSome(storage)) {
            core_1.tryCatch(core_1.unflat(storage.setItem.bind(storage))(key))(value);
        }
        return true;
    },
    delete: (key) => {
        cache[key] = core_1.none;
        if (core_1.isSome(storage)) {
            core_1.tryCatch(storage.removeItem.bind(storage))(key);
        }
        return true;
    },
    hasStorage: core_1.isSome(storage),
});
const getVarGetter = (storage, extraContext) => core_1.asyncToFirstOf(storage.get, core_1.asyncToChain(configureInputContext(storage, extraContext !== null && extraContext !== void 0 ? extraContext : {}), (inputContext) => core_1.asyncToChain(requestInput, core_1.op(storage.set(inputContext.name)))(inputContext)));
const cachedAsyncCall = (storage, timeoutMs) => (fn, isFn) => core_1.asyncToFirstOf(core_1.toChain(storage.get, core_1.toJsonValue, core_1.as(isFn)), (key) => core_1.asyncToChain(fn, core_1.op(core_1.toChain(core_1.toJsonString, storage.set(key), () => setTimeout(() => storage.delete(key), timeoutMs))))(key));
const inputMap = {
    endpoint: {
        name: "endpoint",
        msg: "Configure defiads endpoint",
        type: "text",
        allowStorage: true,
        allowStorageDefault: true,
        placeholder: "http://hostname:port",
        default: "http://127.0.0.1:21867",
    },
    apiKey: {
        name: "apiKey",
        msg: "Enter API key",
        type: "text",
        allowStorage: true,
        allowStorageDefault: true,
        placeholder: "Enter API key located in defiads config file",
    },
    passphrase: {
        name: "passphrase",
        msg: "Please unlock wallet",
        type: "password",
        allowStorage: false,
        allowStorageDefault: false,
        placeholder: "Enter passphrase",
        submitLabel: "Unlock",
    },
    privateKey: {
        name: "privateKey",
        msg: "Provide private key for signing",
        type: "password",
        allowStorage: true,
        allowStorageDefault: false,
        placeholder: "Leave empty to generate new one",
    },
    showPrivateKey: {
        name: "privateKey",
        msg: "Please save your newly generated private key",
        type: "text",
        allowStorage: true,
        allowStorageDefault: false,
        readonly: true,
        submitLabel: "OK",
    },
    link: {
        name: "link",
        msg: "Enter link to release notes",
        type: "text",
        allowStorage: false,
        allowStorageDefault: false,
    }
};
const inputLock = {
    counter: 0,
    resolvers: {}
};
const getInputContext = (name) => inputMap[name];
const configureInputContext = (storage, extraContext) => core_1.flatAndTo(getInputContext, (inputContext) => (Object.assign(Object.assign(Object.assign({}, inputContext), (inputContext.allowStorage ? {
    onRemember: storage.persist(inputContext.name),
    storagePossible: storage.hasStorage,
} : {})), extraContext)));
const requestInput = (inputContext) => new Promise((_resolve) => {
    var _a;
    if (READ_ONLY_MODE) {
        return _resolve(core_1.none);
    }
    if (inputLock.counter++ > 0) {
        if (core_1.isNone(inputLock.resolvers[inputContext.name])) {
            inputLock.resolvers[inputContext.name] = [];
        }
        inputLock.resolvers[inputContext.name].push(_resolve);
        inputLock.counter--;
        return;
    }
    const container = core_1.unwrap(core_1.toHtmlElement("dialog"));
    const containerSecurity = core_1.unwrap(core_1.toHtmlElement("dialog.security"));
    const msgElement = core_1.unwrap(core_1.toHtmlElement("dialog.msg"));
    const inputElement = core_1.unwrap(core_1.toHtmlElement("dialog.input"));
    const storageElement = core_1.unwrap(core_1.toHtmlElement("dialog.storage"));
    const storagePossibleElement = core_1.unwrap(core_1.toHtmlElement("dialog.storage.possible"));
    const storageImpossibleElement = core_1.unwrap(core_1.toHtmlElement("dialog.storage.impossible"));
    const button = core_1.unwrap(core_1.toHtmlElement("dialog.submit"));
    const saveElement = core_1.unwrap(core_1.toHtmlElement("dialog.save"));
    msgElement.innerText = inputContext.msg;
    inputElement.type = inputContext.type;
    inputElement.readOnly = core_1.isSome(inputContext.readonly);
    const storagePossible = (_a = inputContext.storagePossible) !== null && _a !== void 0 ? _a : false;
    if (inputContext.allowStorage) {
        core_1.show(storageElement);
        container.style.height = "250px";
        if (storagePossible) {
            if (inputContext.allowStorageDefault) {
                saveElement.checked = true;
            }
        }
        else {
            saveElement.checked = false;
            saveElement.disabled = true;
            core_1.hide(storagePossibleElement);
            core_1.show(storageImpossibleElement);
        }
    }
    if (core_1.isSome(inputContext.min)) {
        inputElement.min = inputContext.min.toString();
    }
    if (core_1.isSome(inputContext.max)) {
        inputElement.max = inputContext.max.toString();
    }
    if (core_1.isSome(inputContext.placeholder)) {
        inputElement.placeholder = inputContext.placeholder;
    }
    if (core_1.isSome(inputContext.submitLabel)) {
        button.innerText = inputContext.submitLabel;
    }
    if (core_1.isSome(inputContext.default)) {
        inputElement.value = inputContext.default;
    }
    const buttonListener = () => resolve(inputElement.value);
    const keyBoardListener = (event) => {
        if (event.key === "Enter") {
            buttonListener();
        }
    };
    const resolve = (value) => {
        inputElement.removeEventListener("keyup", keyBoardListener);
        button.removeEventListener("click", buttonListener);
        msgElement.innerText = "";
        inputElement.placeholder = "";
        button.innerText = "Submit";
        core_1.hide(storageElement);
        core_1.show(storagePossibleElement);
        core_1.hide(storageImpossibleElement);
        core_1.hide(containerSecurity);
        container.style.height = "200px";
        saveElement.disabled = false;
        inputElement.value = "";
        _resolve(value);
        if (core_1.isSome(value) && saveElement.checked && core_1.isSome(inputContext.onRemember)) {
            inputContext.onRemember(value);
        }
        saveElement.checked = false;
        if (core_1.isSome(inputLock.resolvers[inputContext.name])) {
            inputLock.resolvers[inputContext.name].forEach(r => r(value));
            inputLock.resolvers[inputContext.name] = [];
        }
        inputLock.counter--;
    };
    setTimeout(() => {
        core_1.show(containerSecurity);
        inputElement.focus();
    }, 300);
    button.addEventListener("click", buttonListener);
    inputElement.addEventListener("keyup", keyBoardListener);
});
const renderMetaData = (displayContext) => {
    const verifiedElement = core_1.unwrap(core_1.toHtmlElement("target.verified"));
    const verifiedFullElement = core_1.unwrap(core_1.toHtmlElement("target.verified.full"));
    const updateElement = core_1.unwrap(core_1.toHtmlElement("target.update"));
    const metaData = displayContext.metaData;
    [verifiedElement, verifiedFullElement, updateElement].forEach(core_1.hide);
    const toVerified = (e) => {
        e.classList.add("verified");
        e.classList.remove("unverified");
    };
    const toUnverified = (e) => {
        e.classList.add("unverified");
        e.classList.remove("verified");
    };
    const shouldBeSigned = (displayContext) => displayContext.cat === "webapp:release";
    if (core_1.isNone(metaData)) {
        return core_1.none;
    }
    if (!metaData.supported) {
        displayContext.content = core_1.pre("Can't render ad because it's metadata is not supported by this client version");
        displayContext.abs = "Unsupported version";
        return core_1.none;
    }
    if (!metaData.valid) {
        displayContext.content = core_1.pre("Can't render ad because it's metadata is corrupted");
        displayContext.abs = "Corrupted metadata";
        return core_1.none;
    }
    if (!metaData.signed && shouldBeSigned(displayContext)) {
        [verifiedElement, verifiedFullElement].forEach(core_1.ops(e => e.innerText = "Not signed", toUnverified));
        core_1.show(verifiedElement);
        return core_1.none;
    }
    if (!metaData.signed) {
        return core_1.none;
    }
    core_1.show(verifiedElement);
    if (!metaData.verified) {
        [verifiedElement, verifiedFullElement].forEach(core_1.ops(e => e.innerText = "Not verified", toUnverified));
        displayContext.content = core_1.pre("Signature verification failed");
        if (core_1.isSome(metaData.pubKeyHash)) {
            verifiedFullElement.innerText = verifiedFullElement.innerText + `: ${metaData.pubKeyHash}`;
        }
        return core_1.none;
    }
    const pubKeyHash = core_1.unwrap(metaData.pubKeyHash);
    if (displayContext.cat !== "webapp:release") {
        [verifiedElement, verifiedFullElement].forEach(toVerified);
        verifiedElement.innerText = `Verified: ${pubKeyHash.slice(0, 16)}`;
        verifiedFullElement.innerText = `Verified: ${pubKeyHash}`;
        return core_1.none;
    }
    if (pubKeyHash !== AUTHORIZED_RELEASE_ISSUER) {
        [verifiedElement, verifiedFullElement].forEach(core_1.ops(e => e.innerText = "Verified: Invalid Release Issuer", toUnverified));
        [verifiedElement, verifiedFullElement].forEach(toUnverified);
        return core_1.none;
    }
    [verifiedElement, verifiedFullElement].forEach(core_1.ops(e => e.innerText = "Verified: Authorized Release Issuer", toVerified));
    const abs = core_1.unwrapOr(displayContext.abs, "");
    if (!abs.startsWith("release-") || core_1.isNone(core_1.toNumber(abs.slice(8)))) {
        return core_1.none;
    }
    const textEncoder = new TextEncoder();
    updateElement.href = window.URL.createObjectURL(new Blob([textEncoder.encode(displayContext.content)]));
    updateElement.download = `defiads-webapp-${abs}.html`;
    displayContext.target = core_1.none;
    core_1.show(updateElement);
    const link = metaData.link;
    if (core_1.isNone(link)) {
        return core_1.none;
    }
    return core_1.asyncToChain(getDefiadsApi, (defiads) => defiads.readOne(link), (ad) => ad.text);
};
const display = (context, displayContext) => {
    const catListContainer = core_1.unwrap(core_1.toHtmlElement("target.catList"));
    const iframe = core_1.unwrap(core_1.toHtmlElement("target.iframe"));
    core_1.hide(iframe);
    core_1.hide(catListContainer);
    const getContent = renderMetaData(displayContext);
    if (core_1.isSome(getContent)) {
        displayContext.target = core_1.none;
        getContent(context).then((html) => {
            if (core_1.isNone(html) || core_1.isNone(displayContext.content)) {
                return;
            }
            iframe.setAttribute("srcdoc", html);
            iframe.style.display = "inline-block";
        });
    }
    switch (displayContext.target) {
        case "cat":
            core_1.hide(iframe);
            if (core_1.isSome(displayContext.content)) {
                catListContainer.innerHTML = displayContext.content;
            }
            core_1.show(catListContainer);
            break;
        case "iframe":
            core_1.hide(catListContainer);
            if (core_1.isSome(displayContext.content)) {
                iframe.setAttribute("srcdoc", displayContext.content);
            }
            iframe.style.display = "inline-block";
            break;
        default:
            break;
    }
    const elements = ["defiadId", "cat", "amount", "abs"];
    elements.forEach(key => {
        const element = core_1.toHtmlElement(`target.${key}`);
        const fullElement = core_1.toHtmlElement(`target.${key}.full`);
        if (core_1.isNone(element)) {
            return;
        }
        const data = displayContext[key];
        if (core_1.isNone(data)) {
            core_1.hide(element);
            return;
        }
        if (core_1.isSome(fullElement)) {
            fullElement.innerText = data;
            element.innerText = data.slice(0, 16);
        }
        else {
            element.innerText = data.slice(0, 64);
        }
        core_1.show(element);
        if (key === "cat") {
            if (core_1.isSome(displayContext.catLink) && displayContext.catLink) {
                element.setAttribute("data:cat", data);
                element.classList.add("catLink");
            }
            else {
                element.removeAttribute("data:cat");
                element.classList.remove("catLink");
            }
        }
    });
};
const displayError = (context, message) => display(context, {
    target: "iframe",
    abs: "Error",
    content: core_1.pre(message),
});
const checkTxIdsMenu = (context) => {
    const storage = getMultiStorage(context);
    const txIds = core_1.unwrapOr(storage.get("txIds"), "");
    if (txIds.length > 0) {
        core_1.withHtmlElement("menu.txIds")(core_1.show);
    }
};
const updateTxIds = (context, add) => {
    const storage = getMultiStorage(context);
    const txIds = core_1.unwrapOr(storage.get("txIds"), "") + add + "\n";
    storage.set("txIds")(txIds);
    storage.persist("txIds")(txIds);
    checkTxIdsMenu(context);
    core_1.withHtmlElement("menu.txIds")(core_1.menuHighlight);
};
const displayTxIds = (context) => {
    const storage = getMultiStorage(context);
    const txIds = core_1.unwrapOr(storage.get("txIds"), "");
    menu(context, "blank");
    core_1.withHtmlElement("menu.txIds")(core_1.ops(core_1.menuClearHighlight, core_1.menuSelect));
    display(context, {
        target: "iframe",
        content: core_1.pre(txIds),
        abs: "Bitcoin transaction IDs",
    });
};
const extractMetaData = async (rawAd) => {
    const chunks = rawAd.abs.split("##");
    const ad = Object.assign(Object.assign({}, rawAd), { abs: chunks[0], metaData: {
            valid: true,
            pubKeyHash: core_1.none,
            signed: false,
            supported: true,
            verified: false,
            link: core_1.none,
        } });
    if (chunks.length > 2) {
        ad.metaData.valid = false;
    }
    if (chunks.length !== 2) {
        return ad;
    }
    const version = chunks[1].slice(0, 4);
    if (version !== "0000") {
        ad.metaData.supported = false;
        ad.metaData.valid = false;
        return ad;
    }
    const rawMetaData = core_1.flatAndTo(core_1.toJsonValue, core_1.as(core_1.isJsonObject))(chunks[1].slice(4));
    console.log(rawMetaData);
    if (core_1.isNone(rawMetaData)) {
        ad.metaData.valid = false;
        return ad;
    }
    ad.metaData.link = core_1.as(core_1.isString)(rawMetaData.link);
    const publicKeyString = core_1.as(core_1.isString)(rawMetaData.publicKey);
    const signatureString = core_1.as(core_1.isString)(rawMetaData.signature);
    if (core_1.isNone(publicKeyString) || core_1.isNone(signatureString)) {
        return ad;
    }
    ad.metaData.signed = true;
    const publicKeyJwk = core_1.stringToJwk(publicKeyString);
    if (core_1.isNone(publicKeyJwk)) {
        return ad;
    }
    const signContext = toSignContext(ad, ad.metaData.link);
    try {
        ad.metaData.pubKeyHash = await core_1.digest(publicKeyString);
        const publicKey = await core_1.jwkToKey(publicKeyJwk);
        console.log(serializeContext(signContext));
        ad.metaData.verified = await core_1.verify(serializeContext(signContext), signatureString, publicKey);
    }
    catch (e) { }
    return ad;
};
const adToDisplayContext = (ad) => ({
    target: "iframe",
    content: ad.text,
    abs: ad.abs,
    cat: ad.cat,
    catLink: true,
    defiadId: ad.id,
    amount: ad.amount,
    metaData: ad.metaData,
});
const defiadIdToDisplayContext = async (context, defiadId) => core_1.asyncToChain(getDefiadsApi, defiads => defiads.readOne(defiadId), extractMetaData, ad => (Object.assign(Object.assign({}, ad), { amount: formatBitcoinBalance(ad.weight * ad.length) })), adToDisplayContext)(context);
const expandCat = async (context, cat) => {
    if (core_1.isNone(cat)) {
        console.log("Not loading because category is undefined");
        return;
    }
    const storage = getMultiStorage(context);
    const cachedCall = cachedAsyncCall(storage, 60000);
    const defiads = await getDefiadsApi(context);
    if (core_1.isNone(defiads)) {
        return;
    }
    const cachedGetAds = cachedCall(() => defiads.list([cat]), core_1.isArrayOf(core_1.isListItem));
    const allAds = (await cachedGetAds("defiadsAdsIn" + cat));
    if (core_1.isNone(allAds)) {
        console.log("Failed to load ads");
        return;
    }
    const ads = allAds.slice(0, 9);
    const createElement = (ad) => {
        const chunks = ad.abs.split("##");
        ad.abs = chunks[0];
        const p = document.createElement("p");
        p.innerText = ad.abs.slice(0, 64);
        p.addEventListener("click", async () => {
            const displayContext = await defiadIdToDisplayContext(context, ad.id);
            if (core_1.isNone(displayContext)) {
                return;
            }
            display(context, displayContext);
        });
        return p;
    };
    const catListContainer = core_1.toHtmlElement("target.catList");
    if (core_1.isNone(catListContainer)) {
        return;
    }
    catListContainer.innerHTML = "";
    core_1.toOf(core_1.flatAndTo(createElement, catListContainer.appendChild.bind(catListContainer)))(ads);
    display(context, {
        target: "cat",
        cat: cat,
        catLink: false,
    });
};
const loadCats = async (context, prefix) => {
    const defiads = await getDefiadsApi(context);
    const storage = getMultiStorage(context);
    const cachedCall = cachedAsyncCall(storage, 60000);
    if (core_1.isNone(defiads)) {
        return;
    }
    const cachedGetAllCats = cachedCall(() => defiads.categories(), core_1.isArrayOf(core_1.isString));
    const allCats = await cachedGetAllCats("defiadsCategories");
    if (core_1.isNone(allCats)) {
        console.log("Failed to load categories");
        return;
    }
    const catsContainer = core_1.toHtmlElement("cats");
    if (core_1.isNone(catsContainer)) {
        return;
    }
    const cats = allCats.filter(cat => cat.startsWith(prefix)).slice(0, 9);
    catsContainer.innerHTML = "";
    if (cats.length === 0) {
        return;
    }
    const createElement = (cat) => {
        const p = document.createElement("span");
        p.innerText = cat.slice(0, 64);
        p.onclick = () => expandCat(context, cat);
        return p;
    };
    core_1.toOf(core_1.flatAndTo(createElement, catsContainer.appendChild.bind(catsContainer)))(cats);
    return expandCat(context, cats[0]);
};
const formatBitcoinBalance = (amtSat) => {
    const units = {
        sat: 0,
        BTC: 8,
    };
    const keys = Object.keys(units);
    let unit = core_1.unwrap(core_1.shift(keys));
    let formatted = amtSat;
    while (keys.length > 0 && formatted > 1000000) {
        unit = core_1.unwrap(core_1.shift(keys));
        formatted = amtSat / Math.pow(10, units[unit]);
    }
    return (Math.round(formatted * 1000) / 1000).toString() + " " + unit;
};
const balance = core_1.asyncToChain(getDefiadsApi, (defiads) => defiads.balance(), core_1.toChain((result) => [result.total, result.available], core_1.wrap, core_1.push(["balance.total", "balance.available"]), core_1.toTuple(core_1.toOf(formatBitcoinBalance), core_1.toOf(core_1.toHtmlElement)), core_1.spreadArgs((formattedBalances, htmlElements) => htmlElements.forEach(e => e.innerHTML = core_1.unwrap(formattedBalances.shift())))));
const refreshAvailableBalance = core_1.asyncToChain(getDefiadsApi, (defiads) => defiads.balance(), (balance) => balance.available, (available) => core_1.toChain(core_1.toHtmlElement, e => e.placeholder = `Available: ${available.toString()}`)("composer.amtSat"));
const menuMembers = ["explorer", "composer", "publisher", "client", "blank"];
const menu = (context, elementId) => {
    const element = core_1.toHtmlElement(elementId);
    if (core_1.isNone(element)) {
        return;
    }
    const toMenuElement = core_1.flatAndTo(key => "menu." + key, core_1.toHtmlElement);
    core_1.optionTo(core_1.menuSelect)(toMenuElement(elementId));
    ["update", "txIds"].concat(menuMembers)
        .filter(e => e !== elementId)
        .forEach(core_1.ops(core_1.flatAndTo(toMenuElement, core_1.menuUnselect), core_1.flatAndTo(core_1.toHtmlElement, core_1.hide)));
    if (elementId !== "composer") {
        core_1.show(element);
    }
    const composerContext = getComposerContext(context);
    composerContext.display = elementId === "composer";
    renderComposer(context).then(() => { });
    if (elementId === "explorer") {
        const getInputValue = core_1.toChain(core_1.toHtmlElement, (e) => e.value, core_1.as(core_1.isNonEmptyString));
        const catPrefix = getInputValue("explorer.cat");
        core_1.flatAndTo(core_1.toHtmlElement, core_1.focus)("explorer.cat");
        if (core_1.isSome(catPrefix)) {
            loadCats(context, catPrefix).then(() => { });
        }
        else {
            expandCat(context, "default").then(() => { });
        }
    }
    if (elementId === "client") {
        core_1.withHtmlElement("client.method")(core_1.focus);
    }
    if (elementId === "composer") {
        const composerContext = getComposerContext(context);
        composerContext.display = true;
        renderComposer(context).then(() => { });
    }
};
const registerMenu = (context) => {
    menuMembers.filter(member => !READ_ONLY_MODE || member !== "composer").forEach(key => {
        const menuElement = core_1.toHtmlElement("menu." + key);
        if (core_1.isNone(menuElement)) {
            return;
        }
        menuElement.addEventListener("click", () => menu(context, key));
    });
    const walletElement = core_1.toHtmlElement("menu.wallet");
    if (core_1.isNone(walletElement)) {
        return;
    }
    let timeout = core_1.none;
    const walletHide = () => {
        walletElement.classList.remove("selected");
        core_1.flatAndTo(core_1.toHtmlElement, core_1.hide)("wallet");
        timeout = core_1.none;
    };
    const walletShow = () => {
        balance(context);
        walletElement.classList.add("selected");
        core_1.flatAndTo(core_1.toHtmlElement, core_1.show)("wallet");
        timeout = setTimeout(walletHide, 30000);
    };
    walletElement.addEventListener("click", () => {
        if (core_1.isSome(timeout)) {
            clearTimeout(timeout);
            walletHide();
        }
        else {
            walletShow();
        }
    });
    const txIdsElement = core_1.toHtmlElement("menu.txIds");
    if (core_1.isNone(txIdsElement)) {
        return;
    }
    txIdsElement.addEventListener("click", () => displayTxIds(context));
    txIdsElement.addEventListener("dblclick", () => {
        getMultiStorage(context).delete("txIds");
        displayTxIds(context);
    });
};
const registerCatExplorer = (context) => {
    const catElement = core_1.toHtmlElement("explorer.cat");
    if (core_1.isNone(catElement)) {
        return;
    }
    let timeout = core_1.none;
    catElement.addEventListener("keyup", (event) => {
        if (catElement.value.length < 2) {
            return;
        }
        if (core_1.isSome(timeout)) {
            clearTimeout(timeout);
            timeout = core_1.none;
        }
        const handler = (val) => loadCats(context, val);
        if (event.key === "Enter") {
            handler(catElement.value).then(() => { });
        }
        else {
            timeout = setTimeout(() => handler(catElement.value), 500);
        }
    });
};
const serializeContext = (arrayContext) => arrayContext.filter(core_1.isSome).map((value) => value.length.toString(16).padStart(8, "0") + value).join("");
const unserializeContext = (serialized) => {
    const result = [];
    let index = 0;
    while (index < serialized.length) {
        const length = parseInt(serialized.substr(index, 8), 16);
        if (isNaN(length)) {
            return core_1.none;
        }
        const value = serialized.substr(index + 8, length);
        if (value.length !== length) {
            return core_1.none;
        }
        result.push(value);
        index += 8 + length;
    }
    return result;
};
const toSignContext = (prepared, link) => [prepared.cat, prepared.abs, prepared.text, link].filter(core_1.isString);
const renderComposer = async (context) => {
    const composerContext = getComposerContext(context);
    if (!composerContext.display) {
        ["composer.preview.edit", "composer", "publisher"].forEach(core_1.flatAndTo(core_1.toHtmlElement, core_1.hide));
        return;
    }
    if (core_1.isSome(composerContext.prepared)) {
        const extendedAd = await extractMetaData(composerContext.prepared);
        const displayContext = adToDisplayContext(Object.assign(Object.assign({}, extendedAd), { id: composerContext.defiadId }));
        displayContext.catLink = false;
        display(context, displayContext);
    }
    if (core_1.isSome(composerContext.defiadId)) {
        core_1.withHtmlElement("composer.preview.edit")(core_1.show);
        core_1.withHtmlElement("composer")(core_1.hide);
        core_1.withHtmlElement("publisher")(core_1.show);
        core_1.withHtmlElement("composer.amtSat")(core_1.focus);
    }
    else {
        core_1.withHtmlElement("composer.preview.edit")(core_1.hide);
        core_1.withHtmlElement("composer")(core_1.show);
        core_1.withHtmlElement("publisher")(core_1.hide);
        core_1.withHtmlElement("composer.content")(core_1.focus);
    }
};
const registerComposer = (context) => {
    const catElement = core_1.unwrap(core_1.toHtmlElement("composer.cat"));
    const absElement = core_1.unwrap(core_1.toHtmlElement("composer.abs"));
    const contentElement = core_1.unwrap(core_1.toHtmlElement("composer.content"));
    const signElement = core_1.unwrap(core_1.toHtmlElement("composer.sign"));
    const prepareElement = core_1.unwrap(core_1.toHtmlElement("composer.prepare"));
    const editElement = core_1.unwrap(core_1.toHtmlElement("composer.preview.edit"));
    const amtSatElement = core_1.unwrap(core_1.toHtmlElement("composer.amtSat"));
    const termElement = core_1.unwrap(core_1.toHtmlElement("composer.term"));
    const feeElement = core_1.unwrap(core_1.toHtmlElement("composer.fee"));
    const fundElement = core_1.unwrap(core_1.toHtmlElement("composer.fund"));
    const errHandler = getErrHandler(context);
    const storage = getMultiStorage(context);
    const get = getVarGetter(storage);
    amtSatElement.addEventListener("focus", () => refreshAvailableBalance(context));
    amtSatElement.addEventListener("keyup", () => {
        if (amtSatElement.value === "") {
            refreshAvailableBalance(context);
        }
    });
    absElement.addEventListener("keyup", (event) => {
        if (event.key !== "Enter" || !event.ctrlKey) {
            return;
        }
        storage.delete("link");
        get("link");
    });
    const signAd = async (prepared) => {
        const privateKey = await getPrivateKey(context);
        const link = core_1.as(core_1.isNonEmptyString)(storage.get("link"));
        console.log(privateKey);
        if (core_1.isNone(privateKey)) {
            errHandler({
                code: -3,
                message: "Can't get private key",
            });
            return;
        }
        const signature = await core_1.asyncToChain(core_1.flatAndTo(core_1.swap(core_1.unflat(toSignContext))(link), serializeContext), core_1.swap(core_1.unflat(core_1.sign))(privateKey))(prepared);
        console.log(signature);
        if (core_1.isNone(signature)) {
            errHandler({
                code: -3,
                message: "Can't sign data",
            });
            return;
        }
        const publicKey = await core_1.asyncToChain(core_1.keyToJwk, core_1.jwkToPublic, core_1.jwkToString)(privateKey);
        console.log(publicKey);
        if (core_1.isNone(publicKey)) {
            errHandler({
                code: -3,
                message: "Can't serialize public key",
            });
            return;
        }
        prepared.abs += "##0000" + core_1.unwrap(core_1.toJsonString({
            publicKey,
            signature,
            link,
        }));
        console.log(prepared);
    };
    const prepare = (prepared) => core_1.asyncToChain(getDefiadsApi, (defiads) => defiads.prepare(prepared.cat, prepared.abs, prepared.text))(context);
    const doPrepare = async () => {
        const composerContext = getComposerContext(context);
        composerContext.prepared = {
            cat: catElement.value,
            abs: absElement.value,
            text: contentElement.value,
        };
        if (signElement.checked) {
            await signAd(composerContext.prepared);
        }
        composerContext.defiadId = await prepare(composerContext.prepared);
        return renderComposer(context);
    };
    const doFund = async () => {
        const composerContext = getComposerContext(context);
        const defiadId = composerContext.defiadId;
        if (core_1.isNone(defiadId)) {
            return renderComposer(context);
        }
        const amtSat = core_1.toNumber(amtSatElement.value);
        if (core_1.isSome(amtSat) && amtSat < 50000) {
            errHandler({
                code: -4,
                message: "Minimum amount is 50000 sat",
            });
            return;
        }
        const numberArgs = core_1.toOf(core_1.toNumber)([
            amtSatElement.value,
            termElement.value,
            feeElement.value
        ]);
        if (core_1.isNone(numberArgs)) {
            errHandler({
                code: -2,
                message: "At least one of the numeric arguments is invalid",
            });
            return;
        }
        const wallet = await getDefiadsApiWallet(context);
        if (core_1.isNone(wallet)) {
            errHandler({
                code: -2,
                message: "Can't get wallet",
            });
            return;
        }
        const txId = await wallet.fund(defiadId, numberArgs[0], numberArgs[1], numberArgs[2]);
        if (core_1.isNone(txId)) {
            errHandler({
                code: -2,
                message: "Can't get transaction ID",
            });
            return;
        }
        updateTxIds(context, txId);
        composerContext.defiadId = core_1.none;
        composerContext.display = false;
        catElement.value = "";
        absElement.value = "";
        contentElement.value = "";
        return renderComposer(context);
    };
    const doEdit = async () => {
        getComposerContext(context).defiadId = core_1.none;
        return renderComposer(context);
    };
    prepareElement.addEventListener("click", doPrepare);
    editElement.addEventListener("click", doEdit);
    fundElement.addEventListener("click", doFund);
};
const registerWallet = (context) => {
    const depositElement = core_1.unwrap(core_1.toHtmlElement("deposit.request"));
    const withdrawElement = core_1.unwrap(core_1.toHtmlElement("withdraw.request"));
    const errHandler = getErrHandler(context);
    depositElement.addEventListener("click", async () => {
        const defiads = await getDefiadsApi(context);
        if (core_1.isNone(defiads)) {
            return;
        }
        const address = await defiads.deposit();
        if (core_1.isNone(address)) {
            errHandler({
                code: -2,
                message: "Can't request new deposit address",
            });
            return;
        }
        await requestInput({
            allowStorage: false,
            allowStorageDefault: false,
            default: address,
            msg: "Your new deposit address",
            name: "deposit",
            readonly: true,
            submitLabel: "OK",
            type: "text",
        });
    });
    withdrawElement.addEventListener("click", async () => {
        const err = {
            code: -2,
            message: "User input validation failed",
        };
        const destAddressInput = await requestInput({
            allowStorage: false,
            allowStorageDefault: false,
            msg: "Enter destination address",
            name: "destAddress",
            placeholder: "Destination Bitcoin address",
            type: "text",
        });
        const destAddress = core_1.as(core_1.isNonEmptyString)(destAddressInput);
        if (core_1.isNone(destAddress)) {
            errHandler(err);
            return;
        }
        const placeholder = core_1.unwrapOr(await core_1.asyncToChain(getDefiadsApi, (defiads) => defiads.balance(), (balance) => balance.available, core_1.toString, (s) => "Available: " + s)(context), "Amount in sat to use all available funds");
        const amtSatInput = await requestInput({
            allowStorage: false,
            allowStorageDefault: false,
            msg: "Enter amount in satoshi",
            name: "feeRate",
            placeholder,
            type: "number",
            min: 50000,
        });
        const amtSat = core_1.flatAndTo(core_1.toNumber, Math.floor)(amtSatInput);
        if (core_1.isNone(amtSat) || amtSat <= 0) {
            errHandler(err);
            return;
        }
        if (amtSat < 50000) {
            errHandler({
                code: -4,
                message: "Minimum amount is 50000 sat",
            });
            return;
        }
        const feeRateInput = await requestInput({
            allowStorage: false,
            allowStorageDefault: false,
            msg: "Enter fee rate (sat/byte)",
            name: "feeRate",
            placeholder: "fee rate (enter 10 if not sure)",
            type: "number",
            max: 1000,
        });
        const feeRate = core_1.flatAndTo(core_1.toNumber, Math.floor)(feeRateInput);
        if (core_1.isNone(feeRate) || feeRate <= 0) {
            errHandler(err);
            return;
        }
        const wallet = await getDefiadsApiWallet(context);
        if (core_1.isNone(wallet)) {
            errHandler({
                code: -2,
                message: "Can't get wallet",
            });
            return;
        }
        const txId = await wallet.withdraw(destAddress, feeRate, amtSat);
        if (core_1.isNone(txId)) {
            errHandler({
                code: -2,
                message: "Can't get transaction ID",
            });
            return;
        }
        updateTxIds(context, txId);
    });
};
const targetFullScreen = (fullScreen) => {
    const fullScreenContainer = core_1.unwrap(core_1.toHtmlElement("fullScreen"));
    const target = core_1.unwrap(core_1.toHtmlElement("target"));
    const staticElement = core_1.unwrap(core_1.toHtmlElement("static"));
    const extrasContainer = core_1.unwrap(core_1.toHtmlElement("target.extra"));
    if (core_1.isNone(fullScreenContainer) || core_1.isNone(target) || core_1.isNone(staticElement)) {
        return;
    }
    if (fullScreen) {
        core_1.show(fullScreenContainer);
        fullScreenContainer.appendChild(target);
        target.style.height = "100%";
        extrasContainer.style.position = "sticky";
    }
    else {
        core_1.hide(fullScreenContainer);
        staticElement.appendChild(target);
        extrasContainer.style.position = "static";
    }
};
const toggleFullScreen = () => {
    const fullScreenContainer = core_1.unwrap(core_1.toHtmlElement("fullScreen"));
    targetFullScreen(fullScreenContainer.style.display === "none");
};
const registerNavigation = (context) => {
    const listener = (event) => {
        if (event.key === "Escape") {
            targetFullScreen(false);
        }
        if (!event.ctrlKey) {
            return;
        }
        switch (event.key) {
            case "1":
                menu(context, "explorer");
                break;
            case "2":
                if (!READ_ONLY_MODE) {
                    menu(context, "composer");
                }
                break;
            case "3":
                menu(context, "client");
                break;
            case "4":
                if (!READ_ONLY_MODE) {
                    core_1.flatAndTo(core_1.toHtmlElement, e => e.dispatchEvent(new Event("click")))("menu.wallet");
                }
                break;
            case "f":
                toggleFullScreen();
                break;
            default:
                break;
        }
    };
    document.body.addEventListener("keyup", listener);
    const iframe = core_1.unwrap(core_1.toHtmlElement("target.iframe"));
    iframe.addEventListener("keyup", listener);
};
const registerDisplay = (context) => {
    ["defiadId", "verified"].forEach((key) => {
        const element = core_1.unwrap(core_1.toHtmlElement(`target.${key}`));
        const fullElement = core_1.unwrap(core_1.toHtmlElement(`target.${key}.full`));
        let fullTimeout = core_1.none;
        element.addEventListener("click", () => {
            core_1.hide(element);
            core_1.show(fullElement);
            if (core_1.isSome(fullTimeout)) {
                clearTimeout(fullTimeout);
                fullTimeout = core_1.none;
            }
            fullTimeout = setTimeout(() => {
                core_1.hide(fullElement);
                core_1.show(element);
            }, 1500);
        });
    });
    core_1.withHtmlElement("target.cat")(e => e.addEventListener("click", () => core_1.asyncFlatAndTo(core_1.fromNullable(e.getAttribute.bind(e)), core_1.unflat(expandCat)(context))("data:cat")));
    core_1.withHtmlElement("target.scripts")(e => e.addEventListener("click", () => {
        const iframeElement = core_1.unwrap(core_1.toHtmlElement("target.iframe"));
        iframeElement.setAttribute("sandbox", "allow-scripts");
    }));
};
const registerUpdate = async (context) => {
    const defiads = await getDefiadsApi(context);
    if (core_1.isNone(defiads)) {
        return;
    }
    const releaseItems = await defiads.list(["webapp:release"]);
    if (core_1.isNone(releaseItems)) {
        return;
    }
    const ads = await defiads.read(releaseItems.map((listItem) => listItem.id));
    if (core_1.isNone(ads)) {
        return;
    }
    let maxVersion = READ_ONLY_MODE ? -1 : CURRENT_VERSION;
    let updateCandidate = core_1.none;
    for (let i = 0; i < ads.length; i++) {
        const rawAd = ads[i];
        const ad = await extractMetaData(rawAd);
        const version = ad.abs.startsWith("release-") ? core_1.toNumber(ad.abs.slice(8)) : core_1.none;
        if (core_1.isNone(version) || version <= maxVersion) {
            continue;
        }
        if (!ad.metaData.signed || !ad.metaData.verified || ad.metaData.pubKeyHash !== AUTHORIZED_RELEASE_ISSUER) {
            continue;
        }
        maxVersion = version;
        updateCandidate = rawAd;
    }
    if (core_1.isNone(updateCandidate)) {
        return;
    }
    const updateId = updateCandidate.id;
    const updateElement = core_1.toHtmlElement("menu.update");
    if (core_1.isNone(updateElement)) {
        return;
    }
    updateElement.addEventListener("click", async () => {
        menu(context, "blank");
        const displayContext = await defiadIdToDisplayContext(context, updateId);
        if (core_1.isNone(displayContext)) {
            return;
        }
        display(context, displayContext);
        core_1.withHtmlElement("menu.update")(core_1.ops(core_1.menuSelect, core_1.menuClearHighlight));
    });
    if (READ_ONLY_MODE) {
        core_1.flatAndTo(core_1.toHtmlElement, e => e.innerText = "Download")("menu.update");
    }
    core_1.show(updateElement);
};
const registerClient = (context) => {
    const storage = getMultiStorage(context);
    const get = getVarGetter(storage);
    const errHandler = getErrHandler(context);
    const methodElement = core_1.unwrap(core_1.toHtmlElement("client.method"));
    const paramsElement = core_1.unwrap(core_1.toHtmlElement("client.params"));
    const submitRun = async () => {
        const isValidMethod = core_1.flat(core_1.orIs)(core_1.isDefiadsClientMethod, core_1.isSame("help"));
        const method = core_1.as(core_1.flat(core_1.andIs)(core_1.isString, isValidMethod))(methodElement.value);
        const params = core_1.toChain(core_1.as(core_1.isString), core_1.split("\n"), core_1.filter(core_1.isNonEmptyString), core_1.toOf(core_1.toFirstOf(core_1.toNumber, core_1.toSelf)))(paramsElement.value);
        if (core_1.isNone(method) || core_1.isNone(params)) {
            errHandler({
                code: -2,
                message: "Can't get method or params",
            });
            return;
        }
        const defiadsClient = await getDefiadsClient(context);
        if (core_1.isNone(defiadsClient)) {
            errHandler({
                code: -2,
                message: "Can't get defiads client",
            });
            return;
        }
        if (method === "fund" || method === "withdraw") {
            const passphrase = await get("passphrase");
            if (core_1.isNone(passphrase)) {
                errHandler({
                    code: -2,
                    message: "Can't get passphrase",
                });
                return;
            }
            params.unshift(passphrase);
        }
        const result = method === "help"
            ? core_1.apiHelp
            : await defiadsClient(method)(...params);
        if (core_1.isSome(result)) {
            if (method === "fund" || method === "withdraw") {
                updateTxIds(context, core_1.unwrap(core_1.as(core_1.isString)(result)));
            }
            display(context, {
                target: "iframe",
                content: core_1.flatAndTo(core_1.toDisplayJsonString, core_1.pre)(result),
                abs: "command: " + method,
            });
        }
        else {
            displayError(context, "Execution errored");
        }
    };
    let timeout = core_1.none;
    let mayClear = true;
    let count = 4;
    methodElement.setAttribute("placeholder", Object.keys(core_1.apiHelp.commands).join(" | "));
    methodElement.addEventListener("keyup", (event) => {
        mayClear = true;
        if (event.key === "Enter") {
            submitRun().then(() => { });
            return;
        }
        if (core_1.isSome(timeout)) {
            clearTimeout(timeout);
            timeout = core_1.none;
        }
        const setParamsPlaceholder = (placeholder) => {
            const currentPlaceholder = paramsElement.getAttribute("placeholder");
            if (mayClear && currentPlaceholder !== placeholder) {
                paramsElement.value = "";
            }
            count = placeholder.split("\n").filter(core_1.isNonEmptyString).length;
            if (count > 0) {
                paramsElement.setAttribute("rows", count.toString());
            }
            paramsElement.setAttribute("placeholder", placeholder);
        };
        timeout = setTimeout(() => {
            const setButtonText = (text) => core_1.flatAndTo(core_1.toHtmlElement, e => e.innerText = text)("client.submit");
            const isValidMethod = core_1.flat(core_1.orIs)(core_1.isDefiadsClientMethod, core_1.isSame("help"));
            const method = core_1.as(core_1.flat(core_1.andIs)(core_1.isString, isValidMethod))(methodElement.value);
            if (core_1.isNone(method)) {
                setParamsPlaceholder("");
                setButtonText("Invalid command");
                return;
            }
            setButtonText(core_1.apiHelp.commands[method].description);
            setParamsPlaceholder(core_1.unwrapOr(core_1.as(core_1.isNonEmptyString)(core_1.apiHelp.commands[method].args.replace(/, /g, "\n")), "[no args]"));
        }, 300);
    });
    paramsElement.addEventListener("keydown", () => mayClear = false);
    paramsElement.addEventListener("keyup", (event) => {
        if ((event.ctrlKey || count <= 1) && event.key === "Enter") {
            submitRun().then(() => { });
        }
    });
    core_1.flatAndTo(core_1.toHtmlElement, e => e.addEventListener("click", submitRun))("client.submit");
};
const registerReadOnlyMode = () => ["menu.composer", "menu.wallet"].forEach(core_1.flatAndTo(core_1.toHtmlElement, core_1.hide));
const init = (context) => {
    const storage = getMultiStorage(context);
    if (core_1.isNone(storage.get("endpoint"))) {
        storage.set("endpoint")(inputMap.endpoint.default);
    }
    registerDisplay(context);
    registerCatExplorer(context);
    registerClient(context);
    registerMenu(context);
    registerNavigation(context);
    registerUpdate(context).then(() => { });
    if (READ_ONLY_MODE) {
        registerReadOnlyMode();
    }
    else {
        registerWallet(context);
        registerComposer(context);
        checkTxIdsMenu(context);
    }
    const errHandlerMap = getErrHandlerMap(context);
    errHandlerMap[-32602] = (err) => {
        core_1.toChain(core_1.toDisplayJsonString, core_1.pre, core_1.unflat(displayError)(context))(err);
        switch (err.message) {
            case "Cipher error: invalid padding":
                context.defiadsApiWallet = core_1.none;
                storage.delete("passphrase");
                alert("Passphrase is incorrect");
                break;
            case "invalid api key":
                context.defiadsClientContext = core_1.none;
                context.defiadsClient = core_1.none;
                context.defiadsApi = core_1.none;
                context.defiadsApiWallet = core_1.none;
                storage.delete("apiKey");
                getDefiadsClientContext(context);
                break;
            case "Unsupported: insufficient funds":
                alert("Not enough funds, go to wallet to deposit");
                break;
            default:
                break;
        }
        return core_1.none;
    };
    errHandlerMap[-1] = (err) => {
        console.log(err);
        const inputContext = getInputContext("endpoint");
        inputContext.onRemember = storage.persist("endpoint");
        inputContext.default = storage.get("endpoint");
        inputContext.storagePossible = storage.hasStorage;
        requestInput(inputContext).then((endpoint) => {
            if (core_1.isNone(endpoint)) {
                return;
            }
            storage.set("endpoint")(endpoint);
            context.defiadsClientContext = core_1.none;
            context.defiadsClient = core_1.none;
            context.defiadsApi = core_1.none;
            context.defiadsApiWallet = core_1.none;
        });
        return core_1.none;
    };
    errHandlerMap[-2] = (err) => {
        displayError(context, err.message);
        return core_1.none;
    };
    errHandlerMap[-3] = (err) => {
        alert(err.message);
        return core_1.none;
    };
    errHandlerMap[-4] = (err) => {
        alert(err.message);
        return core_1.none;
    };
    setTimeout(() => menu(context, "explorer"), 200);
};
window.addEventListener("load", () => init({
    cache: exports.CONFIG,
}));

},{"./core":2}],2:[function(require,module,exports){
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.isSome = (option) => typeof option !== "undefined";
exports.isNone = (option) => typeof option === "undefined";
exports.none = void 0;
exports.unwrap = (option) => {
    if (exports.isNone(option)) {
        throw "Panic: Failed to unwrap Option";
    }
    return option;
};
exports.unwrapOr = (option, alternative) => option !== null && option !== void 0 ? option : alternative;
exports.okOrErr = (errHandler) => (option, err) => exports.isSome(option) ? option : errHandler(err);
exports.optionTo = (transformer) => (value) => exports.isSome(value) ? transformer(value) : exports.none;
exports.isErr = (value) => typeof value === "object"
    && value !== null
    && !Array.isArray(value)
    && "code" in value && typeof value.code === "number"
    && "message" in value && typeof value.message === "string";
exports.toErr = (code) => (message) => ({
    message,
    code,
});
exports.toValue = (value) => () => value;
exports.flat = (fn) => (arg1, arg2) => fn(arg1)(arg2);
exports.unflat = (flatFn) => (arg1) => (arg2) => flatFn(arg1, arg2);
exports.swap = (fn) => (arg1) => (arg2) => fn(arg2)(arg1);
exports.optionSwap = (fn) => (arg1) => (arg2) => exports.flat(exports.strictOrTo)(fn, exports.toValue(exports.toNone))(arg2)(arg1);
exports.swapFlat = (flatFn) => (arg1, arg2) => flatFn(arg2, arg1);
exports.as = (fn) => (value) => fn(value) ? value : exports.none;
exports.andIs = (firstPredicate) => (secondPredicate) => (value) => firstPredicate(value) && secondPredicate(value);
exports.orIs = (firstPredicate) => (secondPredicate) => (value) => firstPredicate(value) || secondPredicate(value);
exports.notIs = (predicate) => (value) => !predicate(value);
exports.fromNumber = exports.as(exports.notIs(isNaN));
exports.hasLength = ((length) => (val) => val.length === length);
exports.flatHasLength = exports.flat(exports.hasLength);
exports.isEmpty = exports.hasLength(0);
exports.isNonEmpty = exports.notIs(exports.isEmpty);
exports.isString = (val) => typeof val === "string";
exports.isNumber = (val) => typeof val === "number";
exports.isBoolean = (val) => typeof val === "boolean";
exports.isNull = (val) => val === null;
exports.isNonEmptyString = exports.andIs(exports.isString)(exports.isNonEmpty);
exports.isArray = Array.isArray;
exports.isEither = exports.flat(exports.orIs);
exports.isBoth = exports.flat(exports.andIs);
exports.isOf = (predicate) => (val) => val.every(predicate);
exports.isArrayAnd = exports.andIs(exports.isArray);
exports.isArrayOf = (fn) => exports.isArrayAnd(exports.isOf(fn));
exports.objectIsOfSome = (partial) => exports.isOf(exports.isSome)(Object.keys(partial).map(key => partial[key]));
exports.isOneOf = (predicate1, ...predicates) => predicates.reduce(exports.isEither, predicate1);
exports.isPrimitive = exports.isOneOf(exports.isString, exports.isNumber, exports.isBoolean, exports.isNull);
exports.isSame = (value) => (val) => value === val;
exports.toNone = () => exports.none;
exports.asOf = (predicate) => exports.as(exports.isOf(predicate));
exports.andTo = (firstTransformer) => (secondTransformer) => (value) => exports.optionTo(secondTransformer)(firstTransformer(value));
exports.strictAndTo = (firstTransformer) => (secondTransformer) => (value) => secondTransformer(firstTransformer(value));
exports.asyncAndTo = (firstTransformer) => (secondTransformer) => async (value) => await exports.optionTo(secondTransformer)(await firstTransformer(value));
exports.flatAndTo = exports.flat(exports.andTo);
exports.swapAndTo = exports.swap(exports.andTo);
exports.asyncFlatAndTo = exports.flat(exports.asyncAndTo);
exports.orTo = (firstTransformer) => (secondTransformer) => (value) => { var _a; return (_a = firstTransformer(value)) !== null && _a !== void 0 ? _a : secondTransformer(value); };
exports.strictOrTo = (firstTransformer) => (secondTransformer) => (value) => { var _a; return (_a = firstTransformer(value)) !== null && _a !== void 0 ? _a : secondTransformer(value); };
exports.asyncOrTo = (firstTransformer) => (secondTransformer) => async (value) => { var _a; return (_a = await firstTransformer(value)) !== null && _a !== void 0 ? _a : await secondTransformer(value); };
exports.asyncStrictOrTo = (fn1) => (fn2) => async (value) => { var _a; return (_a = await fn1(value)) !== null && _a !== void 0 ? _a : await fn2(value); };
exports.fallThrough = exports.swapAndTo(exports.toNone);
exports.flatOrTo = exports.flat(exports.orTo);
exports.flatAsyncOrTo = exports.flat(exports.asyncOrTo);
exports.shift = (array) => array.shift();
exports.ops = (...ops) => (val) => {
    ops.forEach(op => op(val));
    return val;
};
exports.op = (op) => (val) => {
    op(val);
    return val;
};
exports.toSelf = (val) => val;
exports.withLog = exports.swapAndTo(exports.op(console.log));
exports.unshift = (item) => exports.op((array) => array.unshift(item));
exports.pop = (array) => array.pop();
exports.push = (item) => exports.op((array) => array.push(item));
exports.toOne = exports.shift;
exports.wrap = (value) => [value];
exports.concatTo = (target) => (array) => target.concat(array);
exports.flatConcatTo = exports.flat(exports.concatTo);
exports.toNumber = exports.flatAndTo(Number, exports.fromNumber);
exports.toBoolean = (value) => exports.optionTo((val) => val !== 0)(exports.toNumber(value));
exports.toString = (value) => value + "";
exports.toNonEmptyString = exports.flatAndTo(exports.toString, exports.as(exports.isNonEmpty));
exports.toOf = (transformer) => (array) => exports.asOf(exports.isSome)(array.map(transformer));
exports.filter = (fn) => (array) => array.filter(fn);
exports.split = (separator) => (value) => value.split(separator);
exports.join = (separator) => (value) => value.join(separator);
exports.toChain = (transformer1, ...transformers) => transformers.reduce(exports.flatAndTo, transformer1);
exports.asyncToChain = (transformer1, ...transformers) => transformers.reduce(exports.asyncFlatAndTo, transformer1);
exports.toTuple = ((...transformers) => (value) => { var _a; return (_a = exports.asOf(exports.isSome)(transformers
    .map(transformer => exports.toChain(exports.shift, transformer, exports.wrap))
    .map(fn => fn(value)))) === null || _a === void 0 ? void 0 : _a.reduce(exports.flatConcatTo, []); });
exports.toFirstOf = (transformer1, ...transformers) => transformers.reduce(exports.flatOrTo, transformer1);
exports.asyncToFirstOf = (transformer1, ...transformers) => transformers.reduce(exports.flatAsyncOrTo, transformer1);
exports.toAsync = (fn) => (value) => Promise.resolve(fn(value));
exports.collectArgs = ((fn) => (...args) => fn(args));
exports.spreadArgs = (fn) => (args) => fn(...args);
exports.fromNullable = exports.swapAndTo(exports.as(exports.notIs(exports.isNull)));
exports.tryCatch = (fn) => (val) => {
    try {
        return fn(val);
    }
    catch (e) {
        return exports.none;
    }
};
exports.asyncTryCatch = (fn) => async (val) => {
    try {
        return await fn(val);
    }
    catch (e) {
        return exports.none;
    }
};
exports.errTryCatch = (errHandler, code) => (fn) => (val) => {
    try {
        return fn(val);
    }
    catch (e) {
        console.log(e);
        return errHandler(exports.toErr(code)(exports.unwrapOr(exports.tryCatch(exports.toNonEmptyString)(e), "Generic error")));
    }
};
exports.asyncErrTryCatch = (errHandler, code) => (fn) => async (val) => {
    try {
        return await fn(val);
    }
    catch (e) {
        console.log(e);
        return errHandler(exports.toErr(code)(exports.unwrapOr(exports.tryCatch(exports.toNonEmptyString)(e), "Generic error")));
    }
};
exports.toJsonValue = exports.tryCatch(JSON.parse);
exports.toJsonString = exports.tryCatch(JSON.stringify);
exports.toDisplayJsonString = exports.tryCatch((v => JSON.stringify(v, undefined, 2)));
exports.isJsonObject = (val) => typeof val === "object"
    && val !== null
    && !Array.isArray(val);
exports.toJsonRpcRequest = (args) => ({
    jsonrpc: "2.0",
    method: args[0],
    params: args[1],
    id: args[2],
});
exports.isJsonRpcResponse = (value) => typeof value === "object"
    && value !== null
    && !Array.isArray(value)
    && "jsonrpc" in value && value.jsonrpc === "2.0"
    && "result" in value && typeof value.result !== "undefined"
    && "id" in value && typeof value.id !== "undefined";
exports.isJsonRpcErrorResponse = (value) => typeof value === "object"
    && value !== null
    && !Array.isArray(value)
    && "jsonrpc" in value && value.jsonrpc === "2.0"
    && "error" in value && exports.isErr(value.error)
    && "id" in value && typeof value.id !== "undefined";
exports.generateKey = async () => await crypto.subtle.generateKey({
    name: "ECDSA",
    namedCurve: "P-384",
}, true, ["sign", "verify"]);
exports.bufferToHex = (buffer) => Array
    .from(new Uint8Array(buffer))
    .map(b => b.toString(16).padStart(2, "0"))
    .join("");
exports.hexToBufferView = (str) => {
    if (str.length === 0) {
        return new Uint8Array();
    }
    const a = [];
    for (let i = 0, len = str.length; i < len; i += 2) {
        a.push(parseInt(str.substr(i, 2), 16));
    }
    return new Uint8Array(a);
};
exports.sign = async (message, privateKey) => {
    const encoder = new TextEncoder();
    const signature = await crypto.subtle.sign({
        name: "ECDSA",
        hash: "SHA-256",
    }, privateKey, encoder.encode(message));
    return exports.bufferToHex(signature);
};
exports.verify = async (message, signature, publicKey) => {
    const encoder = new TextEncoder();
    return await crypto.subtle.verify({
        name: "ECDSA",
        hash: "SHA-256",
    }, publicKey, exports.hexToBufferView(signature), encoder.encode(message));
};
exports.digest = async (message) => exports.bufferToHex(await crypto.subtle.digest("SHA-256", Uint8Array.from(message.split("").map(s => s.charCodeAt(0)))));
exports.jwkIsValid = (jwk) => jwk.crv === "P-384" && jwk.ext === true && jwk.kty === "EC" && exports.isSome(jwk.x) && exports.isSome(jwk.y);
exports.jwkIsPrivate = (jwk) => exports.isSome(jwk.d) && "sign" === exports.flatAndTo(exports.as(exports.isArray), a => a.find(v => v === "sign"))(jwk.key_ops);
exports.jwkToString = exports.toChain(exports.as(exports.jwkIsValid), (jwk) => exports.concatTo(exports.jwkIsPrivate(jwk) ? [jwk.d] : [])([jwk.x, jwk.y]), exports.join("."));
exports.jwkToPublic = (jwk) => (Object.assign(Object.assign({}, jwk), { d: exports.none, key_ops: ["verify"] }));
exports.stringToJwk = (keyString) => {
    const chunks = keyString.split(".");
    if (chunks.length < 2 || chunks.length > 3) {
        return exports.none;
    }
    const jwk = {
        crv: "P-384",
        ext: true,
        kty: "EC",
    };
    if (chunks.length === 3) {
        jwk.d = chunks.shift();
        jwk.key_ops = ["sign"];
    }
    else {
        jwk.key_ops = ["verify"];
    }
    jwk.x = chunks.shift();
    jwk.y = chunks.shift();
    return jwk;
};
exports.jwkToKey = async (jwk) => await crypto.subtle.importKey("jwk", jwk, { name: "ECDSA", namedCurve: "P-384" }, true, exports.unwrapOr(jwk.key_ops, []));
exports.keyToJwk = exports.unflat(crypto.subtle.exportKey.bind(crypto.subtle))("jwk");
exports.keyToString = exports.asyncFlatAndTo(exports.keyToJwk, exports.jwkToString);
exports.toHtmlElement = exports.fromNullable(document.getElementById.bind(document));
const setDisplay = (display) => (element) => element.style.display = display;
exports.show = setDisplay("block");
exports.hide = setDisplay("none");
exports.focus = (e) => e.focus();
exports.menuClearHighlight = (element) => element.classList.remove("highlight");
exports.menuHighlight = (element) => element.classList.add("highlight");
exports.menuSelect = (element) => element.classList.add("selected");
exports.menuUnselect = (element) => element.classList.remove("selected");
exports.withHtmlElement = exports.swap(exports.andTo(exports.toHtmlElement));
exports.escapeHtml = (unsafe) => unsafe
    .replace(/&/g, "&amp;")
    .replace(/</g, "&lt;")
    .replace(/>/g, "&gt;")
    .replace(/"/g, "&quot;")
    .replace(/'/g, "&#039;");
exports.pre = (s) => `<pre>${exports.escapeHtml(s)}</pre>`;
exports.isListItem = (value) => typeof value === "object"
    && value !== null
    && !Array.isArray(value)
    && ("id" in value) && typeof value.id === "string"
    && ("cat" in value) && typeof value.cat === "string"
    && ("abs" in value) && typeof value.abs === "string";
exports.isAd = (value) => typeof value === "object"
    && value !== null
    && !Array.isArray(value)
    && ("text" in value) && typeof value.text === "string"
    && ("weight" in value) && typeof value.weight === "number"
    && ("length" in value) && typeof value.length === "number"
    && ("height" in value) && typeof value.height === "number"
    && ("publisher" in value) && typeof value.publisher === "string"
    && ("term" in value) && typeof value.term === "number"
    && ("start" in value) && typeof value.start === "number"
    && ("end" in value) && typeof value.end === "number"
    && exports.isListItem(value);
exports.isDefiadsClientMethod = (method) => method === "categories"
    || method === "list"
    || method === "read"
    || method === "deposit"
    || method === "balance"
    || method === "prepare"
    || method === "list_prepared"
    || method === "read_prepared"
    || method === "withdraw"
    || method === "fund";
exports.isMethod = (method) => method === "categories"
    || method === "list"
    || method === "read"
    || method === "readOne"
    || method === "deposit"
    || method === "balance"
    || method === "prepare"
    || method === "list_prepared"
    || method === "read_prepared"
    || method === "withdraw"
    || method === "fund"
    || method === "help";
exports.toListItem = (val) => ({
    id: val[0],
    cat: val[1],
    abs: val[2],
});
exports.toBalance = (val) => ({
    total: val[0],
    available: val[1],
});
exports.toPrepared = (val) => ({
    cat: val[0],
    abs: val[1],
    text: val[2],
});
exports.defiadsClientFactory = (context) => (method) => exports.collectArgs(exports.asyncToChain(exports.toChain(exports.as(exports.isArrayOf(exports.isPrimitive)), exports.unshift(context.apiKey)), exports.toChain(exports.wrap, exports.unshift(method), exports.push(0), exports.toJsonRpcRequest), exports.toChain(exports.toJsonString, exports.wrap, exports.unshift("POST"), exports.unshift(context.endpoint)), exports.asyncErrTryCatch(context.errHandler, -1)(exports.spreadArgs(context.transport)), exports.toChain(exports.toJsonValue, exports.flatOrTo(exports.as(exports.isJsonRpcResponse), exports.toChain(exports.as(exports.isJsonRpcErrorResponse), (errResponse) => errResponse.error, context.errHandler))), response => response.result));
exports.apiHelp = {
    version: "0.0.1",
    commands: {
        categories: {
            args: "",
            description: "Gets list of known categories",
        },
        list: {
            args: "category: string",
            description: "List ads within a category",
        },
        read: {
            args: "defiadId: string",
            description: "Read full contents of an ad",
        },
        deposit: {
            args: "",
            description: "Get new deposit address",
        },
        balance: {
            args: "",
            description: "Get wallet balance",
        },
        prepare: {
            args: "category: string, abstract: string, content: string",
            description: "Prepare an ad",
        },
        list_prepared: {
            args: "",
            description: "List prepared ads",
        },
        read_prepared: {
            args: "defiadId: string",
            description: "Read a prepared ad",
        },
        withdraw: {
            args: "destAddress: BitcoinAddress, feeRate: number, amtSat?: number",
            description: "Withdraw Bitcoin from the wallet",
        },
        fund: {
            args: "defiadId: DefiadId, amtSat: number, term: number, feeRate: number",
            description: "Fund prepared ad and publish it to the network",
        },
        help: {
            args: "",
            description: "Show help information",
        }
    },
};
exports.defiadsFactory = (defiadsClient) => ({
    categories: exports.collectArgs(exports.asyncToChain(exports.spreadArgs(defiadsClient("categories")), exports.as(exports.isArrayOf(exports.isString)))),
    list: exports.collectArgs(exports.asyncToChain(exports.toOne, exports.spreadArgs(defiadsClient("list")), exports.as(exports.isArrayOf(exports.isBoth(exports.isArrayOf(exports.isString), exports.hasLength(3)))), exports.toOf(exports.toListItem))),
    read: exports.collectArgs(exports.asyncToChain(exports.toOne, exports.spreadArgs(defiadsClient("read")), exports.as(exports.isArrayOf(exports.isAd)))),
    readOne: exports.collectArgs(exports.asyncToChain(exports.spreadArgs(defiadsClient("read")), exports.as(exports.isArrayOf(exports.isAd)), exports.toOne)),
    deposit: exports.collectArgs(exports.asyncToChain(exports.spreadArgs(defiadsClient("deposit")), exports.as(exports.isString))),
    balance: exports.collectArgs(exports.asyncToChain(exports.spreadArgs(defiadsClient("balance")), exports.as(exports.isArray), exports.toOf(exports.toNumber), exports.as(exports.isBoth(exports.isArrayOf(exports.isNumber), exports.hasLength(2))), exports.toBalance)),
    prepare: exports.collectArgs(exports.asyncToChain(exports.spreadArgs(defiadsClient("prepare")), exports.as(exports.isString))),
    list_prepared: exports.collectArgs(exports.asyncToChain(exports.spreadArgs(defiadsClient("list_prepared")), exports.as(exports.isArrayOf(exports.isString)))),
    read_prepared: exports.collectArgs(exports.asyncToChain(exports.spreadArgs(defiadsClient("read_prepared")), exports.as(exports.isBoth(exports.isArrayOf(exports.isString), exports.hasLength(3))), exports.toPrepared)),
    wallet: (passphrase) => ({
        withdraw: exports.collectArgs(exports.asyncToChain(exports.unshift(passphrase), exports.spreadArgs(defiadsClient("withdraw")), exports.as(exports.isString))),
        fund: exports.collectArgs(exports.asyncToChain(exports.unshift(passphrase), exports.spreadArgs(defiadsClient("fund")), exports.as(exports.isString))),
    }),
    help: () => exports.apiHelp,
});
exports.xhrTransport = (endpoint, method, body) => new Promise(((resolve, reject) => {
    const xhr = new XMLHttpRequest();
    xhr.onreadystatechange = () => {
        if (xhr.readyState !== 4) {
            return;
        }
        if (xhr.status !== 200) {
            return reject(xhr.statusText);
        }
        resolve(xhr.responseText);
    };
    try {
        xhr.open(method, endpoint, true);
        if (exports.isSome(body)) {
            xhr.setRequestHeader("Content-Type", "application/json");
            xhr.send(body);
        }
        else {
            xhr.send();
        }
    }
    catch (e) {
        reject(e);
    }
}));

},{}]},{},[1]);
</script>
<style>
/*!
 * Bootstrap Grid v4.4.1 (https://getbootstrap.com/)
 * Copyright 2011-2019 The Bootstrap Authors
 * Copyright 2011-2019 Twitter, Inc.
 * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)
 */html{box-sizing:border-box;-ms-overflow-style:scrollbar}*,::after,::before{box-sizing:inherit}.container{width:100%;padding-right:15px;padding-left:15px;margin-right:auto;margin-left:auto}@media (min-width:576px){.container{max-width:540px}}@media (min-width:768px){.container{max-width:720px}}@media (min-width:992px){.container{max-width:960px}}@media (min-width:1200px){.container{max-width:1140px}}.container-fluid,.container-lg,.container-md,.container-sm,.container-xl{width:100%;padding-right:15px;padding-left:15px;margin-right:auto;margin-left:auto}@media (min-width:576px){.container,.container-sm{max-width:540px}}@media (min-width:768px){.container,.container-md,.container-sm{max-width:720px}}@media (min-width:992px){.container,.container-lg,.container-md,.container-sm{max-width:960px}}@media (min-width:1200px){.container,.container-lg,.container-md,.container-sm,.container-xl{max-width:1140px}}.row{display:-ms-flexbox;display:flex;-ms-flex-wrap:wrap;flex-wrap:wrap;margin-right:-15px;margin-left:-15px}.no-gutters{margin-right:0;margin-left:0}.no-gutters>.col,.no-gutters>[class*=col-]{padding-right:0;padding-left:0}.col,.col-1,.col-10,.col-11,.col-12,.col-2,.col-3,.col-4,.col-5,.col-6,.col-7,.col-8,.col-9,.col-auto,.col-lg,.col-lg-1,.col-lg-10,.col-lg-11,.col-lg-12,.col-lg-2,.col-lg-3,.col-lg-4,.col-lg-5,.col-lg-6,.col-lg-7,.col-lg-8,.col-lg-9,.col-lg-auto,.col-md,.col-md-1,.col-md-10,.col-md-11,.col-md-12,.col-md-2,.col-md-3,.col-md-4,.col-md-5,.col-md-6,.col-md-7,.col-md-8,.col-md-9,.col-md-auto,.col-sm,.col-sm-1,.col-sm-10,.col-sm-11,.col-sm-12,.col-sm-2,.col-sm-3,.col-sm-4,.col-sm-5,.col-sm-6,.col-sm-7,.col-sm-8,.col-sm-9,.col-sm-auto,.col-xl,.col-xl-1,.col-xl-10,.col-xl-11,.col-xl-12,.col-xl-2,.col-xl-3,.col-xl-4,.col-xl-5,.col-xl-6,.col-xl-7,.col-xl-8,.col-xl-9,.col-xl-auto{position:relative;width:100%;padding-right:15px;padding-left:15px}.col{-ms-flex-preferred-size:0;flex-basis:0;-ms-flex-positive:1;flex-grow:1;max-width:100%}.row-cols-1>*{-ms-flex:0 0 100%;flex:0 0 100%;max-width:100%}.row-cols-2>*{-ms-flex:0 0 50%;flex:0 0 50%;max-width:50%}.row-cols-3>*{-ms-flex:0 0 33.333333%;flex:0 0 33.333333%;max-width:33.333333%}.row-cols-4>*{-ms-flex:0 0 25%;flex:0 0 25%;max-width:25%}.row-cols-5>*{-ms-flex:0 0 20%;flex:0 0 20%;max-width:20%}.row-cols-6>*{-ms-flex:0 0 16.666667%;flex:0 0 16.666667%;max-width:16.666667%}.col-auto{-ms-flex:0 0 auto;flex:0 0 auto;width:auto;max-width:100%}.col-1{-ms-flex:0 0 8.333333%;flex:0 0 8.333333%;max-width:8.333333%}.col-2{-ms-flex:0 0 16.666667%;flex:0 0 16.666667%;max-width:16.666667%}.col-3{-ms-flex:0 0 25%;flex:0 0 25%;max-width:25%}.col-4{-ms-flex:0 0 33.333333%;flex:0 0 33.333333%;max-width:33.333333%}.col-5{-ms-flex:0 0 41.666667%;flex:0 0 41.666667%;max-width:41.666667%}.col-6{-ms-flex:0 0 50%;flex:0 0 50%;max-width:50%}.col-7{-ms-flex:0 0 58.333333%;flex:0 0 58.333333%;max-width:58.333333%}.col-8{-ms-flex:0 0 66.666667%;flex:0 0 66.666667%;max-width:66.666667%}.col-9{-ms-flex:0 0 75%;flex:0 0 75%;max-width:75%}.col-10{-ms-flex:0 0 83.333333%;flex:0 0 83.333333%;max-width:83.333333%}.col-11{-ms-flex:0 0 91.666667%;flex:0 0 91.666667%;max-width:91.666667%}.col-12{-ms-flex:0 0 100%;flex:0 0 100%;max-width:100%}.order-first{-ms-flex-order:-1;order:-1}.order-last{-ms-flex-order:13;order:13}.order-0{-ms-flex-order:0;order:0}.order-1{-ms-flex-order:1;order:1}.order-2{-ms-flex-order:2;order:2}.order-3{-ms-flex-order:3;order:3}.order-4{-ms-flex-order:4;order:4}.order-5{-ms-flex-order:5;order:5}.order-6{-ms-flex-order:6;order:6}.order-7{-ms-flex-order:7;order:7}.order-8{-ms-flex-order:8;order:8}.order-9{-ms-flex-order:9;order:9}.order-10{-ms-flex-order:10;order:10}.order-11{-ms-flex-order:11;order:11}.order-12{-ms-flex-order:12;order:12}.offset-1{margin-left:8.333333%}.offset-2{margin-left:16.666667%}.offset-3{margin-left:25%}.offset-4{margin-left:33.333333%}.offset-5{margin-left:41.666667%}.offset-6{margin-left:50%}.offset-7{margin-left:58.333333%}.offset-8{margin-left:66.666667%}.offset-9{margin-left:75%}.offset-10{margin-left:83.333333%}.offset-11{margin-left:91.666667%}@media (min-width:576px){.col-sm{-ms-flex-preferred-size:0;flex-basis:0;-ms-flex-positive:1;flex-grow:1;max-width:100%}.row-cols-sm-1>*{-ms-flex:0 0 100%;flex:0 0 100%;max-width:100%}.row-cols-sm-2>*{-ms-flex:0 0 50%;flex:0 0 50%;max-width:50%}.row-cols-sm-3>*{-ms-flex:0 0 33.333333%;flex:0 0 33.333333%;max-width:33.333333%}.row-cols-sm-4>*{-ms-flex:0 0 25%;flex:0 0 25%;max-width:25%}.row-cols-sm-5>*{-ms-flex:0 0 20%;flex:0 0 20%;max-width:20%}.row-cols-sm-6>*{-ms-flex:0 0 16.666667%;flex:0 0 16.666667%;max-width:16.666667%}.col-sm-auto{-ms-flex:0 0 auto;flex:0 0 auto;width:auto;max-width:100%}.col-sm-1{-ms-flex:0 0 8.333333%;flex:0 0 8.333333%;max-width:8.333333%}.col-sm-2{-ms-flex:0 0 16.666667%;flex:0 0 16.666667%;max-width:16.666667%}.col-sm-3{-ms-flex:0 0 25%;flex:0 0 25%;max-width:25%}.col-sm-4{-ms-flex:0 0 33.333333%;flex:0 0 33.333333%;max-width:33.333333%}.col-sm-5{-ms-flex:0 0 41.666667%;flex:0 0 41.666667%;max-width:41.666667%}.col-sm-6{-ms-flex:0 0 50%;flex:0 0 50%;max-width:50%}.col-sm-7{-ms-flex:0 0 58.333333%;flex:0 0 58.333333%;max-width:58.333333%}.col-sm-8{-ms-flex:0 0 66.666667%;flex:0 0 66.666667%;max-width:66.666667%}.col-sm-9{-ms-flex:0 0 75%;flex:0 0 75%;max-width:75%}.col-sm-10{-ms-flex:0 0 83.333333%;flex:0 0 83.333333%;max-width:83.333333%}.col-sm-11{-ms-flex:0 0 91.666667%;flex:0 0 91.666667%;max-width:91.666667%}.col-sm-12{-ms-flex:0 0 100%;flex:0 0 100%;max-width:100%}.order-sm-first{-ms-flex-order:-1;order:-1}.order-sm-last{-ms-flex-order:13;order:13}.order-sm-0{-ms-flex-order:0;order:0}.order-sm-1{-ms-flex-order:1;order:1}.order-sm-2{-ms-flex-order:2;order:2}.order-sm-3{-ms-flex-order:3;order:3}.order-sm-4{-ms-flex-order:4;order:4}.order-sm-5{-ms-flex-order:5;order:5}.order-sm-6{-ms-flex-order:6;order:6}.order-sm-7{-ms-flex-order:7;order:7}.order-sm-8{-ms-flex-order:8;order:8}.order-sm-9{-ms-flex-order:9;order:9}.order-sm-10{-ms-flex-order:10;order:10}.order-sm-11{-ms-flex-order:11;order:11}.order-sm-12{-ms-flex-order:12;order:12}.offset-sm-0{margin-left:0}.offset-sm-1{margin-left:8.333333%}.offset-sm-2{margin-left:16.666667%}.offset-sm-3{margin-left:25%}.offset-sm-4{margin-left:33.333333%}.offset-sm-5{margin-left:41.666667%}.offset-sm-6{margin-left:50%}.offset-sm-7{margin-left:58.333333%}.offset-sm-8{margin-left:66.666667%}.offset-sm-9{margin-left:75%}.offset-sm-10{margin-left:83.333333%}.offset-sm-11{margin-left:91.666667%}}@media (min-width:768px){.col-md{-ms-flex-preferred-size:0;flex-basis:0;-ms-flex-positive:1;flex-grow:1;max-width:100%}.row-cols-md-1>*{-ms-flex:0 0 100%;flex:0 0 100%;max-width:100%}.row-cols-md-2>*{-ms-flex:0 0 50%;flex:0 0 50%;max-width:50%}.row-cols-md-3>*{-ms-flex:0 0 33.333333%;flex:0 0 33.333333%;max-width:33.333333%}.row-cols-md-4>*{-ms-flex:0 0 25%;flex:0 0 25%;max-width:25%}.row-cols-md-5>*{-ms-flex:0 0 20%;flex:0 0 20%;max-width:20%}.row-cols-md-6>*{-ms-flex:0 0 16.666667%;flex:0 0 16.666667%;max-width:16.666667%}.col-md-auto{-ms-flex:0 0 auto;flex:0 0 auto;width:auto;max-width:100%}.col-md-1{-ms-flex:0 0 8.333333%;flex:0 0 8.333333%;max-width:8.333333%}.col-md-2{-ms-flex:0 0 16.666667%;flex:0 0 16.666667%;max-width:16.666667%}.col-md-3{-ms-flex:0 0 25%;flex:0 0 25%;max-width:25%}.col-md-4{-ms-flex:0 0 33.333333%;flex:0 0 33.333333%;max-width:33.333333%}.col-md-5{-ms-flex:0 0 41.666667%;flex:0 0 41.666667%;max-width:41.666667%}.col-md-6{-ms-flex:0 0 50%;flex:0 0 50%;max-width:50%}.col-md-7{-ms-flex:0 0 58.333333%;flex:0 0 58.333333%;max-width:58.333333%}.col-md-8{-ms-flex:0 0 66.666667%;flex:0 0 66.666667%;max-width:66.666667%}.col-md-9{-ms-flex:0 0 75%;flex:0 0 75%;max-width:75%}.col-md-10{-ms-flex:0 0 83.333333%;flex:0 0 83.333333%;max-width:83.333333%}.col-md-11{-ms-flex:0 0 91.666667%;flex:0 0 91.666667%;max-width:91.666667%}.col-md-12{-ms-flex:0 0 100%;flex:0 0 100%;max-width:100%}.order-md-first{-ms-flex-order:-1;order:-1}.order-md-last{-ms-flex-order:13;order:13}.order-md-0{-ms-flex-order:0;order:0}.order-md-1{-ms-flex-order:1;order:1}.order-md-2{-ms-flex-order:2;order:2}.order-md-3{-ms-flex-order:3;order:3}.order-md-4{-ms-flex-order:4;order:4}.order-md-5{-ms-flex-order:5;order:5}.order-md-6{-ms-flex-order:6;order:6}.order-md-7{-ms-flex-order:7;order:7}.order-md-8{-ms-flex-order:8;order:8}.order-md-9{-ms-flex-order:9;order:9}.order-md-10{-ms-flex-order:10;order:10}.order-md-11{-ms-flex-order:11;order:11}.order-md-12{-ms-flex-order:12;order:12}.offset-md-0{margin-left:0}.offset-md-1{margin-left:8.333333%}.offset-md-2{margin-left:16.666667%}.offset-md-3{margin-left:25%}.offset-md-4{margin-left:33.333333%}.offset-md-5{margin-left:41.666667%}.offset-md-6{margin-left:50%}.offset-md-7{margin-left:58.333333%}.offset-md-8{margin-left:66.666667%}.offset-md-9{margin-left:75%}.offset-md-10{margin-left:83.333333%}.offset-md-11{margin-left:91.666667%}}@media (min-width:992px){.col-lg{-ms-flex-preferred-size:0;flex-basis:0;-ms-flex-positive:1;flex-grow:1;max-width:100%}.row-cols-lg-1>*{-ms-flex:0 0 100%;flex:0 0 100%;max-width:100%}.row-cols-lg-2>*{-ms-flex:0 0 50%;flex:0 0 50%;max-width:50%}.row-cols-lg-3>*{-ms-flex:0 0 33.333333%;flex:0 0 33.333333%;max-width:33.333333%}.row-cols-lg-4>*{-ms-flex:0 0 25%;flex:0 0 25%;max-width:25%}.row-cols-lg-5>*{-ms-flex:0 0 20%;flex:0 0 20%;max-width:20%}.row-cols-lg-6>*{-ms-flex:0 0 16.666667%;flex:0 0 16.666667%;max-width:16.666667%}.col-lg-auto{-ms-flex:0 0 auto;flex:0 0 auto;width:auto;max-width:100%}.col-lg-1{-ms-flex:0 0 8.333333%;flex:0 0 8.333333%;max-width:8.333333%}.col-lg-2{-ms-flex:0 0 16.666667%;flex:0 0 16.666667%;max-width:16.666667%}.col-lg-3{-ms-flex:0 0 25%;flex:0 0 25%;max-width:25%}.col-lg-4{-ms-flex:0 0 33.333333%;flex:0 0 33.333333%;max-width:33.333333%}.col-lg-5{-ms-flex:0 0 41.666667%;flex:0 0 41.666667%;max-width:41.666667%}.col-lg-6{-ms-flex:0 0 50%;flex:0 0 50%;max-width:50%}.col-lg-7{-ms-flex:0 0 58.333333%;flex:0 0 58.333333%;max-width:58.333333%}.col-lg-8{-ms-flex:0 0 66.666667%;flex:0 0 66.666667%;max-width:66.666667%}.col-lg-9{-ms-flex:0 0 75%;flex:0 0 75%;max-width:75%}.col-lg-10{-ms-flex:0 0 83.333333%;flex:0 0 83.333333%;max-width:83.333333%}.col-lg-11{-ms-flex:0 0 91.666667%;flex:0 0 91.666667%;max-width:91.666667%}.col-lg-12{-ms-flex:0 0 100%;flex:0 0 100%;max-width:100%}.order-lg-first{-ms-flex-order:-1;order:-1}.order-lg-last{-ms-flex-order:13;order:13}.order-lg-0{-ms-flex-order:0;order:0}.order-lg-1{-ms-flex-order:1;order:1}.order-lg-2{-ms-flex-order:2;order:2}.order-lg-3{-ms-flex-order:3;order:3}.order-lg-4{-ms-flex-order:4;order:4}.order-lg-5{-ms-flex-order:5;order:5}.order-lg-6{-ms-flex-order:6;order:6}.order-lg-7{-ms-flex-order:7;order:7}.order-lg-8{-ms-flex-order:8;order:8}.order-lg-9{-ms-flex-order:9;order:9}.order-lg-10{-ms-flex-order:10;order:10}.order-lg-11{-ms-flex-order:11;order:11}.order-lg-12{-ms-flex-order:12;order:12}.offset-lg-0{margin-left:0}.offset-lg-1{margin-left:8.333333%}.offset-lg-2{margin-left:16.666667%}.offset-lg-3{margin-left:25%}.offset-lg-4{margin-left:33.333333%}.offset-lg-5{margin-left:41.666667%}.offset-lg-6{margin-left:50%}.offset-lg-7{margin-left:58.333333%}.offset-lg-8{margin-left:66.666667%}.offset-lg-9{margin-left:75%}.offset-lg-10{margin-left:83.333333%}.offset-lg-11{margin-left:91.666667%}}@media (min-width:1200px){.col-xl{-ms-flex-preferred-size:0;flex-basis:0;-ms-flex-positive:1;flex-grow:1;max-width:100%}.row-cols-xl-1>*{-ms-flex:0 0 100%;flex:0 0 100%;max-width:100%}.row-cols-xl-2>*{-ms-flex:0 0 50%;flex:0 0 50%;max-width:50%}.row-cols-xl-3>*{-ms-flex:0 0 33.333333%;flex:0 0 33.333333%;max-width:33.333333%}.row-cols-xl-4>*{-ms-flex:0 0 25%;flex:0 0 25%;max-width:25%}.row-cols-xl-5>*{-ms-flex:0 0 20%;flex:0 0 20%;max-width:20%}.row-cols-xl-6>*{-ms-flex:0 0 16.666667%;flex:0 0 16.666667%;max-width:16.666667%}.col-xl-auto{-ms-flex:0 0 auto;flex:0 0 auto;width:auto;max-width:100%}.col-xl-1{-ms-flex:0 0 8.333333%;flex:0 0 8.333333%;max-width:8.333333%}.col-xl-2{-ms-flex:0 0 16.666667%;flex:0 0 16.666667%;max-width:16.666667%}.col-xl-3{-ms-flex:0 0 25%;flex:0 0 25%;max-width:25%}.col-xl-4{-ms-flex:0 0 33.333333%;flex:0 0 33.333333%;max-width:33.333333%}.col-xl-5{-ms-flex:0 0 41.666667%;flex:0 0 41.666667%;max-width:41.666667%}.col-xl-6{-ms-flex:0 0 50%;flex:0 0 50%;max-width:50%}.col-xl-7{-ms-flex:0 0 58.333333%;flex:0 0 58.333333%;max-width:58.333333%}.col-xl-8{-ms-flex:0 0 66.666667%;flex:0 0 66.666667%;max-width:66.666667%}.col-xl-9{-ms-flex:0 0 75%;flex:0 0 75%;max-width:75%}.col-xl-10{-ms-flex:0 0 83.333333%;flex:0 0 83.333333%;max-width:83.333333%}.col-xl-11{-ms-flex:0 0 91.666667%;flex:0 0 91.666667%;max-width:91.666667%}.col-xl-12{-ms-flex:0 0 100%;flex:0 0 100%;max-width:100%}.order-xl-first{-ms-flex-order:-1;order:-1}.order-xl-last{-ms-flex-order:13;order:13}.order-xl-0{-ms-flex-order:0;order:0}.order-xl-1{-ms-flex-order:1;order:1}.order-xl-2{-ms-flex-order:2;order:2}.order-xl-3{-ms-flex-order:3;order:3}.order-xl-4{-ms-flex-order:4;order:4}.order-xl-5{-ms-flex-order:5;order:5}.order-xl-6{-ms-flex-order:6;order:6}.order-xl-7{-ms-flex-order:7;order:7}.order-xl-8{-ms-flex-order:8;order:8}.order-xl-9{-ms-flex-order:9;order:9}.order-xl-10{-ms-flex-order:10;order:10}.order-xl-11{-ms-flex-order:11;order:11}.order-xl-12{-ms-flex-order:12;order:12}.offset-xl-0{margin-left:0}.offset-xl-1{margin-left:8.333333%}.offset-xl-2{margin-left:16.666667%}.offset-xl-3{margin-left:25%}.offset-xl-4{margin-left:33.333333%}.offset-xl-5{margin-left:41.666667%}.offset-xl-6{margin-left:50%}.offset-xl-7{margin-left:58.333333%}.offset-xl-8{margin-left:66.666667%}.offset-xl-9{margin-left:75%}.offset-xl-10{margin-left:83.333333%}.offset-xl-11{margin-left:91.666667%}}.d-none{display:none!important}.d-inline{display:inline!important}.d-inline-block{display:inline-block!important}.d-block{display:block!important}.d-table{display:table!important}.d-table-row{display:table-row!important}.d-table-cell{display:table-cell!important}.d-flex{display:-ms-flexbox!important;display:flex!important}.d-inline-flex{display:-ms-inline-flexbox!important;display:inline-flex!important}@media (min-width:576px){.d-sm-none{display:none!important}.d-sm-inline{display:inline!important}.d-sm-inline-block{display:inline-block!important}.d-sm-block{display:block!important}.d-sm-table{display:table!important}.d-sm-table-row{display:table-row!important}.d-sm-table-cell{display:table-cell!important}.d-sm-flex{display:-ms-flexbox!important;display:flex!important}.d-sm-inline-flex{display:-ms-inline-flexbox!important;display:inline-flex!important}}@media (min-width:768px){.d-md-none{display:none!important}.d-md-inline{display:inline!important}.d-md-inline-block{display:inline-block!important}.d-md-block{display:block!important}.d-md-table{display:table!important}.d-md-table-row{display:table-row!important}.d-md-table-cell{display:table-cell!important}.d-md-flex{display:-ms-flexbox!important;display:flex!important}.d-md-inline-flex{display:-ms-inline-flexbox!important;display:inline-flex!important}}@media (min-width:992px){.d-lg-none{display:none!important}.d-lg-inline{display:inline!important}.d-lg-inline-block{display:inline-block!important}.d-lg-block{display:block!important}.d-lg-table{display:table!important}.d-lg-table-row{display:table-row!important}.d-lg-table-cell{display:table-cell!important}.d-lg-flex{display:-ms-flexbox!important;display:flex!important}.d-lg-inline-flex{display:-ms-inline-flexbox!important;display:inline-flex!important}}@media (min-width:1200px){.d-xl-none{display:none!important}.d-xl-inline{display:inline!important}.d-xl-inline-block{display:inline-block!important}.d-xl-block{display:block!important}.d-xl-table{display:table!important}.d-xl-table-row{display:table-row!important}.d-xl-table-cell{display:table-cell!important}.d-xl-flex{display:-ms-flexbox!important;display:flex!important}.d-xl-inline-flex{display:-ms-inline-flexbox!important;display:inline-flex!important}}@media print{.d-print-none{display:none!important}.d-print-inline{display:inline!important}.d-print-inline-block{display:inline-block!important}.d-print-block{display:block!important}.d-print-table{display:table!important}.d-print-table-row{display:table-row!important}.d-print-table-cell{display:table-cell!important}.d-print-flex{display:-ms-flexbox!important;display:flex!important}.d-print-inline-flex{display:-ms-inline-flexbox!important;display:inline-flex!important}}.flex-row{-ms-flex-direction:row!important;flex-direction:row!important}.flex-column{-ms-flex-direction:column!important;flex-direction:column!important}.flex-row-reverse{-ms-flex-direction:row-reverse!important;flex-direction:row-reverse!important}.flex-column-reverse{-ms-flex-direction:column-reverse!important;flex-direction:column-reverse!important}.flex-wrap{-ms-flex-wrap:wrap!important;flex-wrap:wrap!important}.flex-nowrap{-ms-flex-wrap:nowrap!important;flex-wrap:nowrap!important}.flex-wrap-reverse{-ms-flex-wrap:wrap-reverse!important;flex-wrap:wrap-reverse!important}.flex-fill{-ms-flex:1 1 auto!important;flex:1 1 auto!important}.flex-grow-0{-ms-flex-positive:0!important;flex-grow:0!important}.flex-grow-1{-ms-flex-positive:1!important;flex-grow:1!important}.flex-shrink-0{-ms-flex-negative:0!important;flex-shrink:0!important}.flex-shrink-1{-ms-flex-negative:1!important;flex-shrink:1!important}.justify-content-start{-ms-flex-pack:start!important;justify-content:flex-start!important}.justify-content-end{-ms-flex-pack:end!important;justify-content:flex-end!important}.justify-content-center{-ms-flex-pack:center!important;justify-content:center!important}.justify-content-between{-ms-flex-pack:justify!important;justify-content:space-between!important}.justify-content-around{-ms-flex-pack:distribute!important;justify-content:space-around!important}.align-items-start{-ms-flex-align:start!important;align-items:flex-start!important}.align-items-end{-ms-flex-align:end!important;align-items:flex-end!important}.align-items-center{-ms-flex-align:center!important;align-items:center!important}.align-items-baseline{-ms-flex-align:baseline!important;align-items:baseline!important}.align-items-stretch{-ms-flex-align:stretch!important;align-items:stretch!important}.align-content-start{-ms-flex-line-pack:start!important;align-content:flex-start!important}.align-content-end{-ms-flex-line-pack:end!important;align-content:flex-end!important}.align-content-center{-ms-flex-line-pack:center!important;align-content:center!important}.align-content-between{-ms-flex-line-pack:justify!important;align-content:space-between!important}.align-content-around{-ms-flex-line-pack:distribute!important;align-content:space-around!important}.align-content-stretch{-ms-flex-line-pack:stretch!important;align-content:stretch!important}.align-self-auto{-ms-flex-item-align:auto!important;align-self:auto!important}.align-self-start{-ms-flex-item-align:start!important;align-self:flex-start!important}.align-self-end{-ms-flex-item-align:end!important;align-self:flex-end!important}.align-self-center{-ms-flex-item-align:center!important;align-self:center!important}.align-self-baseline{-ms-flex-item-align:baseline!important;align-self:baseline!important}.align-self-stretch{-ms-flex-item-align:stretch!important;align-self:stretch!important}@media (min-width:576px){.flex-sm-row{-ms-flex-direction:row!important;flex-direction:row!important}.flex-sm-column{-ms-flex-direction:column!important;flex-direction:column!important}.flex-sm-row-reverse{-ms-flex-direction:row-reverse!important;flex-direction:row-reverse!important}.flex-sm-column-reverse{-ms-flex-direction:column-reverse!important;flex-direction:column-reverse!important}.flex-sm-wrap{-ms-flex-wrap:wrap!important;flex-wrap:wrap!important}.flex-sm-nowrap{-ms-flex-wrap:nowrap!important;flex-wrap:nowrap!important}.flex-sm-wrap-reverse{-ms-flex-wrap:wrap-reverse!important;flex-wrap:wrap-reverse!important}.flex-sm-fill{-ms-flex:1 1 auto!important;flex:1 1 auto!important}.flex-sm-grow-0{-ms-flex-positive:0!important;flex-grow:0!important}.flex-sm-grow-1{-ms-flex-positive:1!important;flex-grow:1!important}.flex-sm-shrink-0{-ms-flex-negative:0!important;flex-shrink:0!important}.flex-sm-shrink-1{-ms-flex-negative:1!important;flex-shrink:1!important}.justify-content-sm-start{-ms-flex-pack:start!important;justify-content:flex-start!important}.justify-content-sm-end{-ms-flex-pack:end!important;justify-content:flex-end!important}.justify-content-sm-center{-ms-flex-pack:center!important;justify-content:center!important}.justify-content-sm-between{-ms-flex-pack:justify!important;justify-content:space-between!important}.justify-content-sm-around{-ms-flex-pack:distribute!important;justify-content:space-around!important}.align-items-sm-start{-ms-flex-align:start!important;align-items:flex-start!important}.align-items-sm-end{-ms-flex-align:end!important;align-items:flex-end!important}.align-items-sm-center{-ms-flex-align:center!important;align-items:center!important}.align-items-sm-baseline{-ms-flex-align:baseline!important;align-items:baseline!important}.align-items-sm-stretch{-ms-flex-align:stretch!important;align-items:stretch!important}.align-content-sm-start{-ms-flex-line-pack:start!important;align-content:flex-start!important}.align-content-sm-end{-ms-flex-line-pack:end!important;align-content:flex-end!important}.align-content-sm-center{-ms-flex-line-pack:center!important;align-content:center!important}.align-content-sm-between{-ms-flex-line-pack:justify!important;align-content:space-between!important}.align-content-sm-around{-ms-flex-line-pack:distribute!important;align-content:space-around!important}.align-content-sm-stretch{-ms-flex-line-pack:stretch!important;align-content:stretch!important}.align-self-sm-auto{-ms-flex-item-align:auto!important;align-self:auto!important}.align-self-sm-start{-ms-flex-item-align:start!important;align-self:flex-start!important}.align-self-sm-end{-ms-flex-item-align:end!important;align-self:flex-end!important}.align-self-sm-center{-ms-flex-item-align:center!important;align-self:center!important}.align-self-sm-baseline{-ms-flex-item-align:baseline!important;align-self:baseline!important}.align-self-sm-stretch{-ms-flex-item-align:stretch!important;align-self:stretch!important}}@media (min-width:768px){.flex-md-row{-ms-flex-direction:row!important;flex-direction:row!important}.flex-md-column{-ms-flex-direction:column!important;flex-direction:column!important}.flex-md-row-reverse{-ms-flex-direction:row-reverse!important;flex-direction:row-reverse!important}.flex-md-column-reverse{-ms-flex-direction:column-reverse!important;flex-direction:column-reverse!important}.flex-md-wrap{-ms-flex-wrap:wrap!important;flex-wrap:wrap!important}.flex-md-nowrap{-ms-flex-wrap:nowrap!important;flex-wrap:nowrap!important}.flex-md-wrap-reverse{-ms-flex-wrap:wrap-reverse!important;flex-wrap:wrap-reverse!important}.flex-md-fill{-ms-flex:1 1 auto!important;flex:1 1 auto!important}.flex-md-grow-0{-ms-flex-positive:0!important;flex-grow:0!important}.flex-md-grow-1{-ms-flex-positive:1!important;flex-grow:1!important}.flex-md-shrink-0{-ms-flex-negative:0!important;flex-shrink:0!important}.flex-md-shrink-1{-ms-flex-negative:1!important;flex-shrink:1!important}.justify-content-md-start{-ms-flex-pack:start!important;justify-content:flex-start!important}.justify-content-md-end{-ms-flex-pack:end!important;justify-content:flex-end!important}.justify-content-md-center{-ms-flex-pack:center!important;justify-content:center!important}.justify-content-md-between{-ms-flex-pack:justify!important;justify-content:space-between!important}.justify-content-md-around{-ms-flex-pack:distribute!important;justify-content:space-around!important}.align-items-md-start{-ms-flex-align:start!important;align-items:flex-start!important}.align-items-md-end{-ms-flex-align:end!important;align-items:flex-end!important}.align-items-md-center{-ms-flex-align:center!important;align-items:center!important}.align-items-md-baseline{-ms-flex-align:baseline!important;align-items:baseline!important}.align-items-md-stretch{-ms-flex-align:stretch!important;align-items:stretch!important}.align-content-md-start{-ms-flex-line-pack:start!important;align-content:flex-start!important}.align-content-md-end{-ms-flex-line-pack:end!important;align-content:flex-end!important}.align-content-md-center{-ms-flex-line-pack:center!important;align-content:center!important}.align-content-md-between{-ms-flex-line-pack:justify!important;align-content:space-between!important}.align-content-md-around{-ms-flex-line-pack:distribute!important;align-content:space-around!important}.align-content-md-stretch{-ms-flex-line-pack:stretch!important;align-content:stretch!important}.align-self-md-auto{-ms-flex-item-align:auto!important;align-self:auto!important}.align-self-md-start{-ms-flex-item-align:start!important;align-self:flex-start!important}.align-self-md-end{-ms-flex-item-align:end!important;align-self:flex-end!important}.align-self-md-center{-ms-flex-item-align:center!important;align-self:center!important}.align-self-md-baseline{-ms-flex-item-align:baseline!important;align-self:baseline!important}.align-self-md-stretch{-ms-flex-item-align:stretch!important;align-self:stretch!important}}@media (min-width:992px){.flex-lg-row{-ms-flex-direction:row!important;flex-direction:row!important}.flex-lg-column{-ms-flex-direction:column!important;flex-direction:column!important}.flex-lg-row-reverse{-ms-flex-direction:row-reverse!important;flex-direction:row-reverse!important}.flex-lg-column-reverse{-ms-flex-direction:column-reverse!important;flex-direction:column-reverse!important}.flex-lg-wrap{-ms-flex-wrap:wrap!important;flex-wrap:wrap!important}.flex-lg-nowrap{-ms-flex-wrap:nowrap!important;flex-wrap:nowrap!important}.flex-lg-wrap-reverse{-ms-flex-wrap:wrap-reverse!important;flex-wrap:wrap-reverse!important}.flex-lg-fill{-ms-flex:1 1 auto!important;flex:1 1 auto!important}.flex-lg-grow-0{-ms-flex-positive:0!important;flex-grow:0!important}.flex-lg-grow-1{-ms-flex-positive:1!important;flex-grow:1!important}.flex-lg-shrink-0{-ms-flex-negative:0!important;flex-shrink:0!important}.flex-lg-shrink-1{-ms-flex-negative:1!important;flex-shrink:1!important}.justify-content-lg-start{-ms-flex-pack:start!important;justify-content:flex-start!important}.justify-content-lg-end{-ms-flex-pack:end!important;justify-content:flex-end!important}.justify-content-lg-center{-ms-flex-pack:center!important;justify-content:center!important}.justify-content-lg-between{-ms-flex-pack:justify!important;justify-content:space-between!important}.justify-content-lg-around{-ms-flex-pack:distribute!important;justify-content:space-around!important}.align-items-lg-start{-ms-flex-align:start!important;align-items:flex-start!important}.align-items-lg-end{-ms-flex-align:end!important;align-items:flex-end!important}.align-items-lg-center{-ms-flex-align:center!important;align-items:center!important}.align-items-lg-baseline{-ms-flex-align:baseline!important;align-items:baseline!important}.align-items-lg-stretch{-ms-flex-align:stretch!important;align-items:stretch!important}.align-content-lg-start{-ms-flex-line-pack:start!important;align-content:flex-start!important}.align-content-lg-end{-ms-flex-line-pack:end!important;align-content:flex-end!important}.align-content-lg-center{-ms-flex-line-pack:center!important;align-content:center!important}.align-content-lg-between{-ms-flex-line-pack:justify!important;align-content:space-between!important}.align-content-lg-around{-ms-flex-line-pack:distribute!important;align-content:space-around!important}.align-content-lg-stretch{-ms-flex-line-pack:stretch!important;align-content:stretch!important}.align-self-lg-auto{-ms-flex-item-align:auto!important;align-self:auto!important}.align-self-lg-start{-ms-flex-item-align:start!important;align-self:flex-start!important}.align-self-lg-end{-ms-flex-item-align:end!important;align-self:flex-end!important}.align-self-lg-center{-ms-flex-item-align:center!important;align-self:center!important}.align-self-lg-baseline{-ms-flex-item-align:baseline!important;align-self:baseline!important}.align-self-lg-stretch{-ms-flex-item-align:stretch!important;align-self:stretch!important}}@media (min-width:1200px){.flex-xl-row{-ms-flex-direction:row!important;flex-direction:row!important}.flex-xl-column{-ms-flex-direction:column!important;flex-direction:column!important}.flex-xl-row-reverse{-ms-flex-direction:row-reverse!important;flex-direction:row-reverse!important}.flex-xl-column-reverse{-ms-flex-direction:column-reverse!important;flex-direction:column-reverse!important}.flex-xl-wrap{-ms-flex-wrap:wrap!important;flex-wrap:wrap!important}.flex-xl-nowrap{-ms-flex-wrap:nowrap!important;flex-wrap:nowrap!important}.flex-xl-wrap-reverse{-ms-flex-wrap:wrap-reverse!important;flex-wrap:wrap-reverse!important}.flex-xl-fill{-ms-flex:1 1 auto!important;flex:1 1 auto!important}.flex-xl-grow-0{-ms-flex-positive:0!important;flex-grow:0!important}.flex-xl-grow-1{-ms-flex-positive:1!important;flex-grow:1!important}.flex-xl-shrink-0{-ms-flex-negative:0!important;flex-shrink:0!important}.flex-xl-shrink-1{-ms-flex-negative:1!important;flex-shrink:1!important}.justify-content-xl-start{-ms-flex-pack:start!important;justify-content:flex-start!important}.justify-content-xl-end{-ms-flex-pack:end!important;justify-content:flex-end!important}.justify-content-xl-center{-ms-flex-pack:center!important;justify-content:center!important}.justify-content-xl-between{-ms-flex-pack:justify!important;justify-content:space-between!important}.justify-content-xl-around{-ms-flex-pack:distribute!important;justify-content:space-around!important}.align-items-xl-start{-ms-flex-align:start!important;align-items:flex-start!important}.align-items-xl-end{-ms-flex-align:end!important;align-items:flex-end!important}.align-items-xl-center{-ms-flex-align:center!important;align-items:center!important}.align-items-xl-baseline{-ms-flex-align:baseline!important;align-items:baseline!important}.align-items-xl-stretch{-ms-flex-align:stretch!important;align-items:stretch!important}.align-content-xl-start{-ms-flex-line-pack:start!important;align-content:flex-start!important}.align-content-xl-end{-ms-flex-line-pack:end!important;align-content:flex-end!important}.align-content-xl-center{-ms-flex-line-pack:center!important;align-content:center!important}.align-content-xl-between{-ms-flex-line-pack:justify!important;align-content:space-between!important}.align-content-xl-around{-ms-flex-line-pack:distribute!important;align-content:space-around!important}.align-content-xl-stretch{-ms-flex-line-pack:stretch!important;align-content:stretch!important}.align-self-xl-auto{-ms-flex-item-align:auto!important;align-self:auto!important}.align-self-xl-start{-ms-flex-item-align:start!important;align-self:flex-start!important}.align-self-xl-end{-ms-flex-item-align:end!important;align-self:flex-end!important}.align-self-xl-center{-ms-flex-item-align:center!important;align-self:center!important}.align-self-xl-baseline{-ms-flex-item-align:baseline!important;align-self:baseline!important}.align-self-xl-stretch{-ms-flex-item-align:stretch!important;align-self:stretch!important}}.m-0{margin:0!important}.mt-0,.my-0{margin-top:0!important}.mr-0,.mx-0{margin-right:0!important}.mb-0,.my-0{margin-bottom:0!important}.ml-0,.mx-0{margin-left:0!important}.m-1{margin:.25rem!important}.mt-1,.my-1{margin-top:.25rem!important}.mr-1,.mx-1{margin-right:.25rem!important}.mb-1,.my-1{margin-bottom:.25rem!important}.ml-1,.mx-1{margin-left:.25rem!important}.m-2{margin:.5rem!important}.mt-2,.my-2{margin-top:.5rem!important}.mr-2,.mx-2{margin-right:.5rem!important}.mb-2,.my-2{margin-bottom:.5rem!important}.ml-2,.mx-2{margin-left:.5rem!important}.m-3{margin:1rem!important}.mt-3,.my-3{margin-top:1rem!important}.mr-3,.mx-3{margin-right:1rem!important}.mb-3,.my-3{margin-bottom:1rem!important}.ml-3,.mx-3{margin-left:1rem!important}.m-4{margin:1.5rem!important}.mt-4,.my-4{margin-top:1.5rem!important}.mr-4,.mx-4{margin-right:1.5rem!important}.mb-4,.my-4{margin-bottom:1.5rem!important}.ml-4,.mx-4{margin-left:1.5rem!important}.m-5{margin:3rem!important}.mt-5,.my-5{margin-top:3rem!important}.mr-5,.mx-5{margin-right:3rem!important}.mb-5,.my-5{margin-bottom:3rem!important}.ml-5,.mx-5{margin-left:3rem!important}.p-0{padding:0!important}.pt-0,.py-0{padding-top:0!important}.pr-0,.px-0{padding-right:0!important}.pb-0,.py-0{padding-bottom:0!important}.pl-0,.px-0{padding-left:0!important}.p-1{padding:.25rem!important}.pt-1,.py-1{padding-top:.25rem!important}.pr-1,.px-1{padding-right:.25rem!important}.pb-1,.py-1{padding-bottom:.25rem!important}.pl-1,.px-1{padding-left:.25rem!important}.p-2{padding:.5rem!important}.pt-2,.py-2{padding-top:.5rem!important}.pr-2,.px-2{padding-right:.5rem!important}.pb-2,.py-2{padding-bottom:.5rem!important}.pl-2,.px-2{padding-left:.5rem!important}.p-3{padding:1rem!important}.pt-3,.py-3{padding-top:1rem!important}.pr-3,.px-3{padding-right:1rem!important}.pb-3,.py-3{padding-bottom:1rem!important}.pl-3,.px-3{padding-left:1rem!important}.p-4{padding:1.5rem!important}.pt-4,.py-4{padding-top:1.5rem!important}.pr-4,.px-4{padding-right:1.5rem!important}.pb-4,.py-4{padding-bottom:1.5rem!important}.pl-4,.px-4{padding-left:1.5rem!important}.p-5{padding:3rem!important}.pt-5,.py-5{padding-top:3rem!important}.pr-5,.px-5{padding-right:3rem!important}.pb-5,.py-5{padding-bottom:3rem!important}.pl-5,.px-5{padding-left:3rem!important}.m-n1{margin:-.25rem!important}.mt-n1,.my-n1{margin-top:-.25rem!important}.mr-n1,.mx-n1{margin-right:-.25rem!important}.mb-n1,.my-n1{margin-bottom:-.25rem!important}.ml-n1,.mx-n1{margin-left:-.25rem!important}.m-n2{margin:-.5rem!important}.mt-n2,.my-n2{margin-top:-.5rem!important}.mr-n2,.mx-n2{margin-right:-.5rem!important}.mb-n2,.my-n2{margin-bottom:-.5rem!important}.ml-n2,.mx-n2{margin-left:-.5rem!important}.m-n3{margin:-1rem!important}.mt-n3,.my-n3{margin-top:-1rem!important}.mr-n3,.mx-n3{margin-right:-1rem!important}.mb-n3,.my-n3{margin-bottom:-1rem!important}.ml-n3,.mx-n3{margin-left:-1rem!important}.m-n4{margin:-1.5rem!important}.mt-n4,.my-n4{margin-top:-1.5rem!important}.mr-n4,.mx-n4{margin-right:-1.5rem!important}.mb-n4,.my-n4{margin-bottom:-1.5rem!important}.ml-n4,.mx-n4{margin-left:-1.5rem!important}.m-n5{margin:-3rem!important}.mt-n5,.my-n5{margin-top:-3rem!important}.mr-n5,.mx-n5{margin-right:-3rem!important}.mb-n5,.my-n5{margin-bottom:-3rem!important}.ml-n5,.mx-n5{margin-left:-3rem!important}.m-auto{margin:auto!important}.mt-auto,.my-auto{margin-top:auto!important}.mr-auto,.mx-auto{margin-right:auto!important}.mb-auto,.my-auto{margin-bottom:auto!important}.ml-auto,.mx-auto{margin-left:auto!important}@media (min-width:576px){.m-sm-0{margin:0!important}.mt-sm-0,.my-sm-0{margin-top:0!important}.mr-sm-0,.mx-sm-0{margin-right:0!important}.mb-sm-0,.my-sm-0{margin-bottom:0!important}.ml-sm-0,.mx-sm-0{margin-left:0!important}.m-sm-1{margin:.25rem!important}.mt-sm-1,.my-sm-1{margin-top:.25rem!important}.mr-sm-1,.mx-sm-1{margin-right:.25rem!important}.mb-sm-1,.my-sm-1{margin-bottom:.25rem!important}.ml-sm-1,.mx-sm-1{margin-left:.25rem!important}.m-sm-2{margin:.5rem!important}.mt-sm-2,.my-sm-2{margin-top:.5rem!important}.mr-sm-2,.mx-sm-2{margin-right:.5rem!important}.mb-sm-2,.my-sm-2{margin-bottom:.5rem!important}.ml-sm-2,.mx-sm-2{margin-left:.5rem!important}.m-sm-3{margin:1rem!important}.mt-sm-3,.my-sm-3{margin-top:1rem!important}.mr-sm-3,.mx-sm-3{margin-right:1rem!important}.mb-sm-3,.my-sm-3{margin-bottom:1rem!important}.ml-sm-3,.mx-sm-3{margin-left:1rem!important}.m-sm-4{margin:1.5rem!important}.mt-sm-4,.my-sm-4{margin-top:1.5rem!important}.mr-sm-4,.mx-sm-4{margin-right:1.5rem!important}.mb-sm-4,.my-sm-4{margin-bottom:1.5rem!important}.ml-sm-4,.mx-sm-4{margin-left:1.5rem!important}.m-sm-5{margin:3rem!important}.mt-sm-5,.my-sm-5{margin-top:3rem!important}.mr-sm-5,.mx-sm-5{margin-right:3rem!important}.mb-sm-5,.my-sm-5{margin-bottom:3rem!important}.ml-sm-5,.mx-sm-5{margin-left:3rem!important}.p-sm-0{padding:0!important}.pt-sm-0,.py-sm-0{padding-top:0!important}.pr-sm-0,.px-sm-0{padding-right:0!important}.pb-sm-0,.py-sm-0{padding-bottom:0!important}.pl-sm-0,.px-sm-0{padding-left:0!important}.p-sm-1{padding:.25rem!important}.pt-sm-1,.py-sm-1{padding-top:.25rem!important}.pr-sm-1,.px-sm-1{padding-right:.25rem!important}.pb-sm-1,.py-sm-1{padding-bottom:.25rem!important}.pl-sm-1,.px-sm-1{padding-left:.25rem!important}.p-sm-2{padding:.5rem!important}.pt-sm-2,.py-sm-2{padding-top:.5rem!important}.pr-sm-2,.px-sm-2{padding-right:.5rem!important}.pb-sm-2,.py-sm-2{padding-bottom:.5rem!important}.pl-sm-2,.px-sm-2{padding-left:.5rem!important}.p-sm-3{padding:1rem!important}.pt-sm-3,.py-sm-3{padding-top:1rem!important}.pr-sm-3,.px-sm-3{padding-right:1rem!important}.pb-sm-3,.py-sm-3{padding-bottom:1rem!important}.pl-sm-3,.px-sm-3{padding-left:1rem!important}.p-sm-4{padding:1.5rem!important}.pt-sm-4,.py-sm-4{padding-top:1.5rem!important}.pr-sm-4,.px-sm-4{padding-right:1.5rem!important}.pb-sm-4,.py-sm-4{padding-bottom:1.5rem!important}.pl-sm-4,.px-sm-4{padding-left:1.5rem!important}.p-sm-5{padding:3rem!important}.pt-sm-5,.py-sm-5{padding-top:3rem!important}.pr-sm-5,.px-sm-5{padding-right:3rem!important}.pb-sm-5,.py-sm-5{padding-bottom:3rem!important}.pl-sm-5,.px-sm-5{padding-left:3rem!important}.m-sm-n1{margin:-.25rem!important}.mt-sm-n1,.my-sm-n1{margin-top:-.25rem!important}.mr-sm-n1,.mx-sm-n1{margin-right:-.25rem!important}.mb-sm-n1,.my-sm-n1{margin-bottom:-.25rem!important}.ml-sm-n1,.mx-sm-n1{margin-left:-.25rem!important}.m-sm-n2{margin:-.5rem!important}.mt-sm-n2,.my-sm-n2{margin-top:-.5rem!important}.mr-sm-n2,.mx-sm-n2{margin-right:-.5rem!important}.mb-sm-n2,.my-sm-n2{margin-bottom:-.5rem!important}.ml-sm-n2,.mx-sm-n2{margin-left:-.5rem!important}.m-sm-n3{margin:-1rem!important}.mt-sm-n3,.my-sm-n3{margin-top:-1rem!important}.mr-sm-n3,.mx-sm-n3{margin-right:-1rem!important}.mb-sm-n3,.my-sm-n3{margin-bottom:-1rem!important}.ml-sm-n3,.mx-sm-n3{margin-left:-1rem!important}.m-sm-n4{margin:-1.5rem!important}.mt-sm-n4,.my-sm-n4{margin-top:-1.5rem!important}.mr-sm-n4,.mx-sm-n4{margin-right:-1.5rem!important}.mb-sm-n4,.my-sm-n4{margin-bottom:-1.5rem!important}.ml-sm-n4,.mx-sm-n4{margin-left:-1.5rem!important}.m-sm-n5{margin:-3rem!important}.mt-sm-n5,.my-sm-n5{margin-top:-3rem!important}.mr-sm-n5,.mx-sm-n5{margin-right:-3rem!important}.mb-sm-n5,.my-sm-n5{margin-bottom:-3rem!important}.ml-sm-n5,.mx-sm-n5{margin-left:-3rem!important}.m-sm-auto{margin:auto!important}.mt-sm-auto,.my-sm-auto{margin-top:auto!important}.mr-sm-auto,.mx-sm-auto{margin-right:auto!important}.mb-sm-auto,.my-sm-auto{margin-bottom:auto!important}.ml-sm-auto,.mx-sm-auto{margin-left:auto!important}}@media (min-width:768px){.m-md-0{margin:0!important}.mt-md-0,.my-md-0{margin-top:0!important}.mr-md-0,.mx-md-0{margin-right:0!important}.mb-md-0,.my-md-0{margin-bottom:0!important}.ml-md-0,.mx-md-0{margin-left:0!important}.m-md-1{margin:.25rem!important}.mt-md-1,.my-md-1{margin-top:.25rem!important}.mr-md-1,.mx-md-1{margin-right:.25rem!important}.mb-md-1,.my-md-1{margin-bottom:.25rem!important}.ml-md-1,.mx-md-1{margin-left:.25rem!important}.m-md-2{margin:.5rem!important}.mt-md-2,.my-md-2{margin-top:.5rem!important}.mr-md-2,.mx-md-2{margin-right:.5rem!important}.mb-md-2,.my-md-2{margin-bottom:.5rem!important}.ml-md-2,.mx-md-2{margin-left:.5rem!important}.m-md-3{margin:1rem!important}.mt-md-3,.my-md-3{margin-top:1rem!important}.mr-md-3,.mx-md-3{margin-right:1rem!important}.mb-md-3,.my-md-3{margin-bottom:1rem!important}.ml-md-3,.mx-md-3{margin-left:1rem!important}.m-md-4{margin:1.5rem!important}.mt-md-4,.my-md-4{margin-top:1.5rem!important}.mr-md-4,.mx-md-4{margin-right:1.5rem!important}.mb-md-4,.my-md-4{margin-bottom:1.5rem!important}.ml-md-4,.mx-md-4{margin-left:1.5rem!important}.m-md-5{margin:3rem!important}.mt-md-5,.my-md-5{margin-top:3rem!important}.mr-md-5,.mx-md-5{margin-right:3rem!important}.mb-md-5,.my-md-5{margin-bottom:3rem!important}.ml-md-5,.mx-md-5{margin-left:3rem!important}.p-md-0{padding:0!important}.pt-md-0,.py-md-0{padding-top:0!important}.pr-md-0,.px-md-0{padding-right:0!important}.pb-md-0,.py-md-0{padding-bottom:0!important}.pl-md-0,.px-md-0{padding-left:0!important}.p-md-1{padding:.25rem!important}.pt-md-1,.py-md-1{padding-top:.25rem!important}.pr-md-1,.px-md-1{padding-right:.25rem!important}.pb-md-1,.py-md-1{padding-bottom:.25rem!important}.pl-md-1,.px-md-1{padding-left:.25rem!important}.p-md-2{padding:.5rem!important}.pt-md-2,.py-md-2{padding-top:.5rem!important}.pr-md-2,.px-md-2{padding-right:.5rem!important}.pb-md-2,.py-md-2{padding-bottom:.5rem!important}.pl-md-2,.px-md-2{padding-left:.5rem!important}.p-md-3{padding:1rem!important}.pt-md-3,.py-md-3{padding-top:1rem!important}.pr-md-3,.px-md-3{padding-right:1rem!important}.pb-md-3,.py-md-3{padding-bottom:1rem!important}.pl-md-3,.px-md-3{padding-left:1rem!important}.p-md-4{padding:1.5rem!important}.pt-md-4,.py-md-4{padding-top:1.5rem!important}.pr-md-4,.px-md-4{padding-right:1.5rem!important}.pb-md-4,.py-md-4{padding-bottom:1.5rem!important}.pl-md-4,.px-md-4{padding-left:1.5rem!important}.p-md-5{padding:3rem!important}.pt-md-5,.py-md-5{padding-top:3rem!important}.pr-md-5,.px-md-5{padding-right:3rem!important}.pb-md-5,.py-md-5{padding-bottom:3rem!important}.pl-md-5,.px-md-5{padding-left:3rem!important}.m-md-n1{margin:-.25rem!important}.mt-md-n1,.my-md-n1{margin-top:-.25rem!important}.mr-md-n1,.mx-md-n1{margin-right:-.25rem!important}.mb-md-n1,.my-md-n1{margin-bottom:-.25rem!important}.ml-md-n1,.mx-md-n1{margin-left:-.25rem!important}.m-md-n2{margin:-.5rem!important}.mt-md-n2,.my-md-n2{margin-top:-.5rem!important}.mr-md-n2,.mx-md-n2{margin-right:-.5rem!important}.mb-md-n2,.my-md-n2{margin-bottom:-.5rem!important}.ml-md-n2,.mx-md-n2{margin-left:-.5rem!important}.m-md-n3{margin:-1rem!important}.mt-md-n3,.my-md-n3{margin-top:-1rem!important}.mr-md-n3,.mx-md-n3{margin-right:-1rem!important}.mb-md-n3,.my-md-n3{margin-bottom:-1rem!important}.ml-md-n3,.mx-md-n3{margin-left:-1rem!important}.m-md-n4{margin:-1.5rem!important}.mt-md-n4,.my-md-n4{margin-top:-1.5rem!important}.mr-md-n4,.mx-md-n4{margin-right:-1.5rem!important}.mb-md-n4,.my-md-n4{margin-bottom:-1.5rem!important}.ml-md-n4,.mx-md-n4{margin-left:-1.5rem!important}.m-md-n5{margin:-3rem!important}.mt-md-n5,.my-md-n5{margin-top:-3rem!important}.mr-md-n5,.mx-md-n5{margin-right:-3rem!important}.mb-md-n5,.my-md-n5{margin-bottom:-3rem!important}.ml-md-n5,.mx-md-n5{margin-left:-3rem!important}.m-md-auto{margin:auto!important}.mt-md-auto,.my-md-auto{margin-top:auto!important}.mr-md-auto,.mx-md-auto{margin-right:auto!important}.mb-md-auto,.my-md-auto{margin-bottom:auto!important}.ml-md-auto,.mx-md-auto{margin-left:auto!important}}@media (min-width:992px){.m-lg-0{margin:0!important}.mt-lg-0,.my-lg-0{margin-top:0!important}.mr-lg-0,.mx-lg-0{margin-right:0!important}.mb-lg-0,.my-lg-0{margin-bottom:0!important}.ml-lg-0,.mx-lg-0{margin-left:0!important}.m-lg-1{margin:.25rem!important}.mt-lg-1,.my-lg-1{margin-top:.25rem!important}.mr-lg-1,.mx-lg-1{margin-right:.25rem!important}.mb-lg-1,.my-lg-1{margin-bottom:.25rem!important}.ml-lg-1,.mx-lg-1{margin-left:.25rem!important}.m-lg-2{margin:.5rem!important}.mt-lg-2,.my-lg-2{margin-top:.5rem!important}.mr-lg-2,.mx-lg-2{margin-right:.5rem!important}.mb-lg-2,.my-lg-2{margin-bottom:.5rem!important}.ml-lg-2,.mx-lg-2{margin-left:.5rem!important}.m-lg-3{margin:1rem!important}.mt-lg-3,.my-lg-3{margin-top:1rem!important}.mr-lg-3,.mx-lg-3{margin-right:1rem!important}.mb-lg-3,.my-lg-3{margin-bottom:1rem!important}.ml-lg-3,.mx-lg-3{margin-left:1rem!important}.m-lg-4{margin:1.5rem!important}.mt-lg-4,.my-lg-4{margin-top:1.5rem!important}.mr-lg-4,.mx-lg-4{margin-right:1.5rem!important}.mb-lg-4,.my-lg-4{margin-bottom:1.5rem!important}.ml-lg-4,.mx-lg-4{margin-left:1.5rem!important}.m-lg-5{margin:3rem!important}.mt-lg-5,.my-lg-5{margin-top:3rem!important}.mr-lg-5,.mx-lg-5{margin-right:3rem!important}.mb-lg-5,.my-lg-5{margin-bottom:3rem!important}.ml-lg-5,.mx-lg-5{margin-left:3rem!important}.p-lg-0{padding:0!important}.pt-lg-0,.py-lg-0{padding-top:0!important}.pr-lg-0,.px-lg-0{padding-right:0!important}.pb-lg-0,.py-lg-0{padding-bottom:0!important}.pl-lg-0,.px-lg-0{padding-left:0!important}.p-lg-1{padding:.25rem!important}.pt-lg-1,.py-lg-1{padding-top:.25rem!important}.pr-lg-1,.px-lg-1{padding-right:.25rem!important}.pb-lg-1,.py-lg-1{padding-bottom:.25rem!important}.pl-lg-1,.px-lg-1{padding-left:.25rem!important}.p-lg-2{padding:.5rem!important}.pt-lg-2,.py-lg-2{padding-top:.5rem!important}.pr-lg-2,.px-lg-2{padding-right:.5rem!important}.pb-lg-2,.py-lg-2{padding-bottom:.5rem!important}.pl-lg-2,.px-lg-2{padding-left:.5rem!important}.p-lg-3{padding:1rem!important}.pt-lg-3,.py-lg-3{padding-top:1rem!important}.pr-lg-3,.px-lg-3{padding-right:1rem!important}.pb-lg-3,.py-lg-3{padding-bottom:1rem!important}.pl-lg-3,.px-lg-3{padding-left:1rem!important}.p-lg-4{padding:1.5rem!important}.pt-lg-4,.py-lg-4{padding-top:1.5rem!important}.pr-lg-4,.px-lg-4{padding-right:1.5rem!important}.pb-lg-4,.py-lg-4{padding-bottom:1.5rem!important}.pl-lg-4,.px-lg-4{padding-left:1.5rem!important}.p-lg-5{padding:3rem!important}.pt-lg-5,.py-lg-5{padding-top:3rem!important}.pr-lg-5,.px-lg-5{padding-right:3rem!important}.pb-lg-5,.py-lg-5{padding-bottom:3rem!important}.pl-lg-5,.px-lg-5{padding-left:3rem!important}.m-lg-n1{margin:-.25rem!important}.mt-lg-n1,.my-lg-n1{margin-top:-.25rem!important}.mr-lg-n1,.mx-lg-n1{margin-right:-.25rem!important}.mb-lg-n1,.my-lg-n1{margin-bottom:-.25rem!important}.ml-lg-n1,.mx-lg-n1{margin-left:-.25rem!important}.m-lg-n2{margin:-.5rem!important}.mt-lg-n2,.my-lg-n2{margin-top:-.5rem!important}.mr-lg-n2,.mx-lg-n2{margin-right:-.5rem!important}.mb-lg-n2,.my-lg-n2{margin-bottom:-.5rem!important}.ml-lg-n2,.mx-lg-n2{margin-left:-.5rem!important}.m-lg-n3{margin:-1rem!important}.mt-lg-n3,.my-lg-n3{margin-top:-1rem!important}.mr-lg-n3,.mx-lg-n3{margin-right:-1rem!important}.mb-lg-n3,.my-lg-n3{margin-bottom:-1rem!important}.ml-lg-n3,.mx-lg-n3{margin-left:-1rem!important}.m-lg-n4{margin:-1.5rem!important}.mt-lg-n4,.my-lg-n4{margin-top:-1.5rem!important}.mr-lg-n4,.mx-lg-n4{margin-right:-1.5rem!important}.mb-lg-n4,.my-lg-n4{margin-bottom:-1.5rem!important}.ml-lg-n4,.mx-lg-n4{margin-left:-1.5rem!important}.m-lg-n5{margin:-3rem!important}.mt-lg-n5,.my-lg-n5{margin-top:-3rem!important}.mr-lg-n5,.mx-lg-n5{margin-right:-3rem!important}.mb-lg-n5,.my-lg-n5{margin-bottom:-3rem!important}.ml-lg-n5,.mx-lg-n5{margin-left:-3rem!important}.m-lg-auto{margin:auto!important}.mt-lg-auto,.my-lg-auto{margin-top:auto!important}.mr-lg-auto,.mx-lg-auto{margin-right:auto!important}.mb-lg-auto,.my-lg-auto{margin-bottom:auto!important}.ml-lg-auto,.mx-lg-auto{margin-left:auto!important}}@media (min-width:1200px){.m-xl-0{margin:0!important}.mt-xl-0,.my-xl-0{margin-top:0!important}.mr-xl-0,.mx-xl-0{margin-right:0!important}.mb-xl-0,.my-xl-0{margin-bottom:0!important}.ml-xl-0,.mx-xl-0{margin-left:0!important}.m-xl-1{margin:.25rem!important}.mt-xl-1,.my-xl-1{margin-top:.25rem!important}.mr-xl-1,.mx-xl-1{margin-right:.25rem!important}.mb-xl-1,.my-xl-1{margin-bottom:.25rem!important}.ml-xl-1,.mx-xl-1{margin-left:.25rem!important}.m-xl-2{margin:.5rem!important}.mt-xl-2,.my-xl-2{margin-top:.5rem!important}.mr-xl-2,.mx-xl-2{margin-right:.5rem!important}.mb-xl-2,.my-xl-2{margin-bottom:.5rem!important}.ml-xl-2,.mx-xl-2{margin-left:.5rem!important}.m-xl-3{margin:1rem!important}.mt-xl-3,.my-xl-3{margin-top:1rem!important}.mr-xl-3,.mx-xl-3{margin-right:1rem!important}.mb-xl-3,.my-xl-3{margin-bottom:1rem!important}.ml-xl-3,.mx-xl-3{margin-left:1rem!important}.m-xl-4{margin:1.5rem!important}.mt-xl-4,.my-xl-4{margin-top:1.5rem!important}.mr-xl-4,.mx-xl-4{margin-right:1.5rem!important}.mb-xl-4,.my-xl-4{margin-bottom:1.5rem!important}.ml-xl-4,.mx-xl-4{margin-left:1.5rem!important}.m-xl-5{margin:3rem!important}.mt-xl-5,.my-xl-5{margin-top:3rem!important}.mr-xl-5,.mx-xl-5{margin-right:3rem!important}.mb-xl-5,.my-xl-5{margin-bottom:3rem!important}.ml-xl-5,.mx-xl-5{margin-left:3rem!important}.p-xl-0{padding:0!important}.pt-xl-0,.py-xl-0{padding-top:0!important}.pr-xl-0,.px-xl-0{padding-right:0!important}.pb-xl-0,.py-xl-0{padding-bottom:0!important}.pl-xl-0,.px-xl-0{padding-left:0!important}.p-xl-1{padding:.25rem!important}.pt-xl-1,.py-xl-1{padding-top:.25rem!important}.pr-xl-1,.px-xl-1{padding-right:.25rem!important}.pb-xl-1,.py-xl-1{padding-bottom:.25rem!important}.pl-xl-1,.px-xl-1{padding-left:.25rem!important}.p-xl-2{padding:.5rem!important}.pt-xl-2,.py-xl-2{padding-top:.5rem!important}.pr-xl-2,.px-xl-2{padding-right:.5rem!important}.pb-xl-2,.py-xl-2{padding-bottom:.5rem!important}.pl-xl-2,.px-xl-2{padding-left:.5rem!important}.p-xl-3{padding:1rem!important}.pt-xl-3,.py-xl-3{padding-top:1rem!important}.pr-xl-3,.px-xl-3{padding-right:1rem!important}.pb-xl-3,.py-xl-3{padding-bottom:1rem!important}.pl-xl-3,.px-xl-3{padding-left:1rem!important}.p-xl-4{padding:1.5rem!important}.pt-xl-4,.py-xl-4{padding-top:1.5rem!important}.pr-xl-4,.px-xl-4{padding-right:1.5rem!important}.pb-xl-4,.py-xl-4{padding-bottom:1.5rem!important}.pl-xl-4,.px-xl-4{padding-left:1.5rem!important}.p-xl-5{padding:3rem!important}.pt-xl-5,.py-xl-5{padding-top:3rem!important}.pr-xl-5,.px-xl-5{padding-right:3rem!important}.pb-xl-5,.py-xl-5{padding-bottom:3rem!important}.pl-xl-5,.px-xl-5{padding-left:3rem!important}.m-xl-n1{margin:-.25rem!important}.mt-xl-n1,.my-xl-n1{margin-top:-.25rem!important}.mr-xl-n1,.mx-xl-n1{margin-right:-.25rem!important}.mb-xl-n1,.my-xl-n1{margin-bottom:-.25rem!important}.ml-xl-n1,.mx-xl-n1{margin-left:-.25rem!important}.m-xl-n2{margin:-.5rem!important}.mt-xl-n2,.my-xl-n2{margin-top:-.5rem!important}.mr-xl-n2,.mx-xl-n2{margin-right:-.5rem!important}.mb-xl-n2,.my-xl-n2{margin-bottom:-.5rem!important}.ml-xl-n2,.mx-xl-n2{margin-left:-.5rem!important}.m-xl-n3{margin:-1rem!important}.mt-xl-n3,.my-xl-n3{margin-top:-1rem!important}.mr-xl-n3,.mx-xl-n3{margin-right:-1rem!important}.mb-xl-n3,.my-xl-n3{margin-bottom:-1rem!important}.ml-xl-n3,.mx-xl-n3{margin-left:-1rem!important}.m-xl-n4{margin:-1.5rem!important}.mt-xl-n4,.my-xl-n4{margin-top:-1.5rem!important}.mr-xl-n4,.mx-xl-n4{margin-right:-1.5rem!important}.mb-xl-n4,.my-xl-n4{margin-bottom:-1.5rem!important}.ml-xl-n4,.mx-xl-n4{margin-left:-1.5rem!important}.m-xl-n5{margin:-3rem!important}.mt-xl-n5,.my-xl-n5{margin-top:-3rem!important}.mr-xl-n5,.mx-xl-n5{margin-right:-3rem!important}.mb-xl-n5,.my-xl-n5{margin-bottom:-3rem!important}.ml-xl-n5,.mx-xl-n5{margin-left:-3rem!important}.m-xl-auto{margin:auto!important}.mt-xl-auto,.my-xl-auto{margin-top:auto!important}.mr-xl-auto,.mx-xl-auto{margin-right:auto!important}.mb-xl-auto,.my-xl-auto{margin-bottom:auto!important}.ml-xl-auto,.mx-xl-auto{margin-left:auto!important}}
</style>
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <style>
        input[type=text], input[type=password], input[type=number], select, textarea {
            width: 100%;
            padding: 10px;
            margin: 8px 0;
            display: inline-block;
            border: 1px solid #ccc;
            border-radius: 4px;
            box-sizing: border-box;
        }
        div {
            border-radius: 5px;
            padding: 10px;
        }
        button {
            width: 100%;
            background-color: #44a;
            color: white;
            padding: 14px 20px;
            margin: 8px 0;
            border: none;
            border-radius: 4px;
            cursor: pointer;
        }
        textarea {
            height: 100%;
        }
        .target {
            outline: none;
            border: 1px solid #aaa;
            display: inline-block;
            width: 100%;
            min-height: 600px;
            height: 100%;
        }
        .fullScreen .target {
            display: block;
        }
        .outerTarget {
        }
        .targetAbs {
            margin-bottom: 5px;
        }
        div.targetCat {
            display: inline-block;
            padding: 10px;
            color: #77a;
            cursor: pointer;
        }
        div.targetCat p {
            display: block;
            outline: none;
            border: 1px solid rgba(0, 0, 0, 0.8);
            padding: 12px;
            text-align: center;
        }
        div.explorer {
            padding-bottom: 0;
            margin-bottom: 0;
        }
        .blank {
            margin: 0 0 0 0;
            padding: 0 0 0 0;
            display: none;
        }
        div.explorer .cats span, span.selectedCat {
            padding: 8px;
            margin: 5px;
            border: 1px solid rgba(0, 0, 0, 0.8);
            color: #4444aa;
            cursor: pointer;
        }
        .breadcrumbs {
            padding: 8px;
            margin: 5px;
            border: 1px solid rgba(0, 0, 0, 0.8);
            background-color: #f2f2f2;
        }
        span.breadcrumbs.mono {
            font-family: monospace;
        }
        span.breadcrumbs.verified {
            background-color: #2ecc40;
        }
        span.breadcrumbs.unverified {
            background-color: #f32;
        }
        span.breadcrumbs.catLink {
            text-decoration: underline;
            cursor: pointer;
        }
        a.breadcrumbs.targetUpdate {
            cursor: pointer;
            background-color: deepskyblue;
        }
        span.breadcrumbs.button {
            background-color: #44a;
            color: white;
            border: none;
            border-radius: 4px;
            cursor: pointer;
        }
        div.menu span.selected {
            color: #113;
            text-decoration: underline;
        }
        span.selectedCat {
            padding: 8px;
            margin: 5px;
            border: 1px solid rgba(0, 0, 0, 0.8);
            color: #113;
            text-decoration: underline;
        }
        .selectedId {
            padding: 8px;
            margin: 5px;
            border: 1px solid rgba(0, 0, 0, 0.8);
            color: #113;
            background-color: #f2f2f2;
            font-family: monospace;
        }
        div.wallet {
            background-color: #f0f0ff;
            border: 1px solid #444;
            position: absolute;
            top: 58px;
            right: 34px;
            padding: 20px;
            z-index: 1;
        }
        div.dialog {
            background-color: #aae;
            border: 1px solid #444;
            position: absolute;
            top: 50%;
            left: 50%;
            margin-top: -200px;
            margin-left: -150px;
            width: 300px;
            height: 200px;
            z-index: 3;
        }
        div.dialogBackground {
            width: 100%;
            height: 100%;
            position: absolute;
            left: 0;
            top: 0;
            /*background-color: #4CAF50;*/
            background-color: #4CAF50B0;
            z-index: 2;
        }
        div.fullScreen {
            width: 100%;
            height: 100%;
            position: absolute;
            padding: 0;
            left: 0;
            top: 0;
            /*background-color: #4CAF50;*/
            background-color: white;
            z-index: 3;
        }
        .tooltip {
            position: relative;
            display: inline-block;
            border-bottom: 1px dotted black;
        }
        .tooltip .tooltiptext {
            visibility: hidden;
            width: 400px;
            background-color: #abc;
            color: #000;
            text-align: center;
            padding: 5px 0;
            border-radius: 6px;
            position: absolute;
            z-index: 4;
        }

        .tooltip:hover .tooltiptext {
            visibility: visible;
        }

        div.explorer p {
            margin: 3px;
            padding: 0;
        }
        div.menu {
            padding: 0;
            border: 1px solid #444444;
        }
        div.menu span {
            margin-left: 10px;
            margin-right: 30px;
            cursor: pointer;
            color: #4444aa;
        }
        div.menu span.highlight {
            color: darkorange;
        }
        span.link {
            margin-left: 10px;
            margin-right: 10px;
            color: #4444aa;
            cursor: pointer;
        }
        span.address {
            font-weight: bolder;
            font-size: x-small;
        }
        body {
            background-color: #f0f0ff;
            /*background-image: linear-gradient(#99a, #eef);*/
        }
    </style>
    <title>Defiads HTML</title>
</head>
<body>
<div id="fullScreen" class="fullScreen" style="display: none;"></div>
<div id="wallet" class="wallet" style="display: none;">
    <p><b>Balance:</b></p>
    <p>Total: <span id="balance.total">[loading]</span></p>
    <p>Available: <span id="balance.available">[loading]</span></p>
    <p>
        <span id="deposit.request" class="link">Deposit</span>
        <span id="withdraw.request" class="link">Withdraw</span>
    </p>
</div>
<div id="dialog.security" class="dialogBackground" style="display: none;">
    <div id="dialog" class="dialog">
        <p>
            <label for="dialog.input" id="dialog.msg"></label>
        </p>
        <p>
            <input id="dialog.input" type="text" placeholder="" />
        </p>
        <p id="dialog.storage" style="display: none;">
            <span>
                <input id="dialog.save" type="checkbox" />
                <label for="dialog.save" class="tooltip">Remember
                    <span class="tooltiptext" id="dialog.storage.possible">
                        Save this value in local storage
                    </span>
                    <span class="tooltiptext" id="dialog.storage.impossible" style="display: none;">
                        Your browser does not support access to local storage when browsing a local file.<br/>
                        You can still access the service, but you'll have to provide these values every session.
                    </span>
                </label>
            </span>
        </p>
        <p>
            <button id="dialog.submit">Submit</button>
        </p>
    </div>
</div>
<div class="container-xl" id="static">
    <div id="menu" class="row menu">
        <div class="col-9">
            <span id="menu.blank" class="blank"></span>
            <span id="menu.explorer">Explorer</span>
            <span id="menu.composer">Composer</span>
            <span id="menu.client">Client</span>
        </div>
        <div class="col-1">
            <span id="menu.update" class="highlight" style="display: none;">Update</span>
        </div>
        <div class="col-1">
            <span id="menu.txIds" style="display: none;">TxIds</span>
        </div>
        <div class="col-1">
            <span id="menu.wallet">Wallet</span>
        </div>
    </div>
    <div id="blank" class="blank" style="display: none;"></div>
    <div id="explorer" class="explorer" style="display: none;">
        <div class="row">
            <div class="col">
                <label for="explorer.cat">Enter category prefix:</label>
                <input id="explorer.cat" type="text" value="" placeholder="Start typing category" />
            </div>
            <div class="col">
                <p><strong>Categories</strong></p>
                <div class="cats" id="cats"></div>
            </div>
        </div>
    </div>
    <div id="client" class="client" style="display: none;">
        <div class="row">
            <label for="client.method">Enter command:</label>
            <input id="client.method" type="text" value="" />
        </div>
        <div class="row">
            <label for="client.params">params (newline-separated):</label>
            <textarea id="client.params" rows="1"></textarea>
        </div>
        <div class="row">
            <button id="client.submit">Run</button>
        </div>
    </div>

    <div id="composer" class="composer" style="display: none;">
        <div class="row">
            <label for="composer.cat">Category</label>
            <input id="composer.cat" type="text" value="" />
        </div>
        <div class="row">
            <label for="composer.abs">Abstract</label>
            <input id="composer.abs" type="text" value="" />
        </div>
        <div class="row">
            <label for="composer.content">Content</label>
            <textarea id="composer.content" rows="20"></textarea>
        </div>
        <div class="row">
            <input id="composer.sign" type="checkbox" />
            <label for="composer.sign">Sign</label>
        </div>
        <div class="row">
            <button id="composer.prepare">Prepare</button>
        </div>
    </div>
    <div id="publisher" class="composer" style="display: none;">
        <div class="row">
            <div class="col">
                <label for="composer.amtSat">Amount (sat)</label>
                <input id="composer.amtSat" type="number" value="" />
            </div>
            <div class="col">
                <label for="composer.term">Term (blocks)</label>
                <input id="composer.term" type="number" value="" />
            </div>
            <div class="col">
                <label for="composer.fee">Fee (sat/byte)</label>
                <input id="composer.fee" type="number" value="" />
            </div>
        </div>
        <div class="row">
            <button id="composer.fund">Fund & Publish</button>
        </div>
    </div>
    <div class="row" id="target.extra">
        <span id="composer.preview.edit" class="breadcrumbs button" style="display: none;">Edit</span>
        <span id="target.cat" class="breadcrumbs" style="display: none;"></span>
        <span id="target.abs" class="breadcrumbs" style="display: none;"></span>
        <span id="target.defiadId" class="breadcrumbs mono" style="display: none;"></span>
        <span id="target.defiadId.full" class="breadcrumbs mono" style="display: none;"></span>
        <span id="target.amount" class="breadcrumbs" style="display: none;"></span>
        <span id="target.verified" class="breadcrumbs verified mono" style="display: none;"></span>
        <span id="target.verified.full" class="breadcrumbs verified mono" style="display: none;"></span>
        <a id="target.update" class="breadcrumbs targetUpdate" style="display: none;">Download release</a>
    </div>
    <div id="target" class="row outerTarget">
        <div id="target.catList" class="target targetCat" style="display: none;"></div>
        <iframe id="target.iframe" class="target" referrerpolicy="no-referrer" sandbox></iframe>
    </div>
</div>
</body>
</html>
